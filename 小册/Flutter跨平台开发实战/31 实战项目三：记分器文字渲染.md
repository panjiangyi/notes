åˆ°ç°åœ¨ä¸ºæ­¢ï¼ŒFlappy Bird æ¸¸æˆå·²ç»å®Œæˆå¤§éƒ¨åˆ†çš„è®¾è®¡å’Œç¼–ç å®ç°äº†ã€‚ç©å®¶ä¸ä»…å¯ä»¥è¿›è¡Œæ¸¸æˆï¼Œè¿˜èƒ½ä½“éªŒèƒŒæ™¯éŸ³ä¹å’ŒéŸ³æ•ˆå¸¦æ¥çš„æ°›å›´ä¸Šçš„æ¸²æŸ“ï¼Œä½†ä¼¼ä¹è¿˜å·®ç‚¹ä»€ä¹ˆã€‚

æ²¡é”™ï¼Œè¿˜å·®è®°åˆ†å™¨ä»¥åŠå„ç§æ¸¸æˆæ ‡é¢˜ã€å¼€å§‹æŒ‰é’®ã€‚å¦‚æœç”¨åŠ¨å›¾å±•ç¤ºçš„è¯ï¼Œè¿™äº›ç»„ä»¶çš„æ˜¾ç¤ºæ ·å¼å’Œæ—¶æœºåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š

![untitled.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3a377fb0198f4b1690b12449b7eeed26~tplv-k3u1fbpfcp-watermark.image?)

ä»”ç»†åˆ†æå›¾ä¸­çš„è¡¨è±¡ï¼Œæ ¹æ®æ¸¸æˆçŠ¶æ€çš„ä¸åŒï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹è§„å¾‹ï¼š

1. å½“æ¸¸æˆå¤„äºå¼€å§‹å‰ï¼Œæ˜¾ç¤º Flappy Bird å­—æ ·çš„æ ‡é¢˜å’Œå¼€å§‹æ¸¸æˆæŒ‰é’®ï¼›
2. æ¸¸æˆè¿›è¡Œæ—¶ï¼Œç”»é¢ä¸­å¤®é ä¸Šçš„éƒ¨åˆ†æ˜¾ç¤ºå¾—åˆ†ï¼›
3. æ¸¸æˆç»“æŸæ—¶ï¼Œæ˜¾ç¤º Game Over å­—æ ·æ ‡é¢˜ï¼Œå¾—åˆ†ä¾æ—§ä¿æŒç°å®çŠ¶æ€ã€‚

`ğŸ’¡ æç¤ºï¼šç»†å¿ƒçš„ä½ ä¸€å®šä¼šå‘ç°ï¼Œå¾—åˆ†å’Œ Game Over æ ‡é¢˜è¢«ç®¡é“è¦†ç›–ä½äº†ã€‚åˆ«ç€æ€¥ï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€è®²ä»‹ç»ç»„ä»¶ä¹‹é—´å æ”¾é¡ºåºçš„å®ç°ï¼Œå®ƒèƒ½å¤Ÿå®Œç¾åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚`

è¿™äº›æ ‡é¢˜ã€æŒ‰é’®å’Œè®°åˆ†å™¨ï¼Œå†åŠ ä¸Šä¹‹å‰æ‰€æœ‰çš„ç»„ä»¶ï¼Œæ„æˆäº†å®Œæ•´çš„ Flappy Bird æ¸¸æˆä¸–ç•Œã€‚å­¦ä¹ å®Œæœ¬è®²ï¼Œè¿™ä¸ªä¸–ç•Œå°±èƒ½å®Œæ•´åœ°å‘ˆç°åœ¨ç©å®¶çœ¼å‰äº†ã€‚

## å®ç°æ€è·¯

å†åŠ¨æ‰‹ç¼–ç å‰ï¼Œæˆ‘ä»¬å…ˆæ¥è®¾è®¡å®ç°è¿™äº›ç»„ä»¶çš„æ€è·¯ã€‚

ç›¸ä¿¡å­¦åˆ°æœ¬è®²ï¼Œå¤§å®¶åº”è¯¥éƒ½èƒ½è½»æ˜“æƒ³åˆ°ï¼šFlappy Birdã€Game Over å’Œå¼€å§‹æ¸¸æˆæŒ‰é’®ï¼Œä½¿ç”¨ SpriteComponent ä¸å°±è¡Œäº†å—ï¼Ÿ

ç¡®å®å¦‚æ­¤ï¼Œå®ç°å®ƒä»¬å¹¶ä¸éš¾ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„å°±æ˜¯**æ ¹æ®æ¸¸æˆçŠ¶æ€ä¸åŒï¼ŒåŠ¨æ€è¿›è¡Œæ·»åŠ å’Œç§»é™¤**ã€‚è€Œæ¸¸æˆçŠ¶æ€ä»å“ªé‡Œå¾—åˆ°å‘¢ï¼Ÿè¿˜è®°å¾— BirdComponent å—ï¼Ÿå¯¹äºæœ¬ä¾‹è€Œè¨€ï¼Œå°é¸Ÿçš„çŠ¶æ€å’Œæ¸¸æˆçŠ¶æ€ç´§å¯†ç›¸å…³ï¼Œå¯ä»¥å¤ç”¨ã€‚

è€Œè®°åˆ†å™¨ï¼Œé™¤äº†éœ€è¦æ·»åŠ ç±»ä¼¼çš„é€»è¾‘å¤–ï¼Œè¿˜éœ€è¦å®ç°è®°åˆ†çš„åŠŸèƒ½ã€‚

ä»”ç»†è§‚å¯ŸåŠ¨å›¾å¯ä»¥å‘ç°ï¼Œå°é¸Ÿä¸€æ—¦é£è¿‡éšœç¢ç‰©ï¼Œå°±è®¡ 1 åˆ†ã€‚å®é™…ä¸Šï¼Œä¸ºäº†é™ä½éš¾åº¦ï¼Œæˆ‘æŠŠè®°åˆ†çš„æ ‡å‡†é™ä½ä¸ºé£è¡Œè¿‡åŠå°±è®°åˆ†ï¼Œè€Œä¸æ˜¯å®Œå…¨é£è¿‡ã€‚ä½†æ— è®ºéš¾åº¦å¦‚ä½•ï¼Œéƒ½æ¶‰åŠä¸€ä¸ªé—®é¢˜ï¼šé‚£å°±æ˜¯å°é¸Ÿå’Œç®¡é“åœ¨æ¨ªåæ ‡ä¸Šçš„å…³ç³»ã€‚

æˆ‘çš„åˆ¤æ–­æ€è·¯æ˜¯ï¼š**æ—¢ç„¶å°é¸Ÿåœ¨æ¨ªè½´ä¸Šçš„åæ ‡ä¸å˜ï¼Œé‚£å°±åªè¦ç­‰åˆ°ç®¡é“ç§»åŠ¨è‡³å±å¹•é å·¦çš„ä¸€åŠå°±ç«‹å³è®°åˆ†**ã€‚å°é¸Ÿå’Œç®¡é“éšœç¢ç‰©æ˜¯ç›¸å¯¹è¿åŠ¨çš„ï¼Œå¦‚æ­¤ï¼Œä¾¿ç›¸å½“äºå°é¸Ÿé£è¿‡äº†ç®¡é“çš„ä¸€åŠã€‚

æœ‰äº†å®ç°æ€è·¯ï¼Œæ¥ä¸‹æ¥å°±åˆ°äº†å…·ä½“çš„ç¼–ç ç¯èŠ‚ï¼Œè®©æˆ‘ä»¬åŠ¨èµ·æ‰‹æ¥å§ï¼

## ç¼–ç å®ç°

### æ„å»ºæ‰€éœ€çš„æ‰€æœ‰ SpriteComponent

é¦–å…ˆï¼Œæ„å»ºæ‰€æœ‰çš„ SpriteComponent ç»„ä»¶ï¼ŒåŒ…æ‹¬ Flappy Birdã€Game Overã€å¼€å§‹æ¸¸æˆæŒ‰é’®ä»¥åŠè®°åˆ†å™¨ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œå…ˆæ¥çœ‹æ¸¸æˆå‰ï¼ŒFlappy Bird æ ‡é¢˜çš„ä»£ç ï¼š

```dart
import 'package:flame/components.dart';
import 'package:flutter_flappy_bird/elements/bird.dart';
class TitleComponent extends SpriteComponent {
  TitleComponent(this.screenSize, this.birdComponent)
      : super(size: Vector2(178, 48));
  Vector2 screenSize;
  final BirdComponent birdComponent;
  @override
  Future<void>? onLoad() async {
    sprite = await Sprite.load('title.png');
  }
  @override
  void onGameResize(Vector2 size) {
    super.onGameResize(size);
    screenSize = size;
    position = Vector2((size.x - 178) / 2, (size.y / 2 - 48) / 2);
  }
  @override
  void update(double dt) {
    super.update(dt);
    if (birdComponent.getCurrentStatus() == BirdComponent.statusFlying ||
        birdComponent.getCurrentStatus() == BirdComponent.statusGameOver) {
      removeFromParent();
    }
  }
}
```

è¿™æ®µä»£ç åä¸º title.dartã€‚å®ƒçš„ç´ æå›¾å¤§å°ä¸º 178 * 48ï¼Œæ‰€ä»¥åœ¨`onGameResize()`æ–¹æ³•ä¸­ï¼Œè¿›è¡Œäº†å±å¹•ä¸­ç‚¹çš„åç§»è®¡ç®—ï¼Œä»è€Œä½¿å…¶å±…ä¸­æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚
åœ¨`update()`æ–¹æ³•ä¸­ï¼Œé€šè¿‡å¯¹ä¼ å…¥çš„ birdComponentï¼Œä¹Ÿå°±æ˜¯å°é¸Ÿç»„ä»¶çš„çŠ¶æ€è¿›è¡Œåˆ¤æ–­ï¼Œå½“æ¸¸æˆå¤„äºè¿›è¡Œæ—¶å’Œæ¸¸æˆç»“æŸæ—¶ï¼Œä¸»åŠ¨ç§»é™¤è‡ªå·±ï¼Œä»è€Œåœ¨å±å¹•ä¸Šæ¶ˆå¤±ã€‚

å†æ¥çœ‹å¼€å§‹æ¸¸æˆæŒ‰é’®ï¼Œå®ƒå’Œ Flappy Bird æ ‡é¢˜çš„å‡ºç°æ—¶æœºä¸€æ¨¡ä¸€æ ·ï¼Œå”¯ä¸€ä¸åŒçš„å°±æ˜¯æ˜¾ç¤ºä½ç½®äº†ã€‚äºæ˜¯è¶çƒ­æ‰“é“ï¼Œå®ç°å¼€å§‹æ¸¸æˆæŒ‰é’®ï¼š

```dart
import 'package:flame/components.dart';
import 'bird.dart';
class StartButtonComponent extends SpriteComponent {
  StartButtonComponent(this.screenSize, this.birdComponent)
      : super(size: Vector2(116, 70));
  Vector2 screenSize;
  final BirdComponent birdComponent;
  @override
  Future<void>? onLoad() async {
    sprite = await Sprite.load('button_play.png');
  }
  @override
  void onGameResize(Vector2 size) {
    super.onGameResize(size);
    screenSize = size;
    position = Vector2((size.x - 116) / 2, (size.y - 96) - 70 - 20);
  }
  @override
  void update(double dt) {
    super.update(dt);
    if (birdComponent.getCurrentStatus() == BirdComponent.statusFlying ||
        birdComponent.getCurrentStatus() == BirdComponent.statusGameOver) {
      removeFromParent();
    }
  }
}
```

æ€ä¹ˆæ ·ï¼Œåˆ°è¿™ä¸ºæ­¢ï¼Œéƒ½è¿˜ç®—å¥½ç†è§£å§ï¼Ÿ

è¿™é‡Œå…¶å®æœ‰ä¸€ä¸ªé€»è¾‘ä¸Šå€¼å¾—ä¼˜åŒ–çš„ç‚¹ã€‚åœ¨`update()`æ–¹æ³•ä¸­ï¼Œå…¶å®åªéœ€è¦åšå¦‚ä¸‹åˆ¤æ–­å³å¯ï¼š

```dart
if (birdComponent.getCurrentStatus() == BirdComponent.statusFlying) {
  removeFromParent();
}
```

ä½ èƒ½è¯´å‡ºä¸ºä»€ä¹ˆå—ï¼Ÿ

å…¶å®ï¼Œæ¸¸æˆç»“æŸçš„çŠ¶æ€å¿…ç„¶è¦å…ˆç»è¿‡æ¸¸æˆä¸­çš„çŠ¶æ€ã€‚å› æ­¤ï¼Œå¤„äºæ¸¸æˆä¸­æ—¶ï¼Œç»„ä»¶å·²ç»è¢«ç§»é™¤äº†ï¼Œå…¶å®å°±æ— éœ€å†å¯¹æ¸¸æˆç»“æŸçš„çŠ¶æ€è¿›è¡Œåˆ¤æ–­äº†ã€‚

æ¥ä¸‹æ¥æ˜¯ Game Over çš„æ ‡é¢˜ç»„ä»¶ï¼Œå®ƒçš„å®ç°æ˜¯è¿™æ ·çš„ï¼š

```dart
import 'package:flame/components.dart';
import 'bird.dart';
class GameOverComponent extends SpriteComponent {
  GameOverComponent(this.screenSize, this.birdComponent)
      : super(size: Vector2(204, 54));
  Vector2 screenSize;
  final BirdComponent birdComponent;
  @override
  Future<void>? onLoad() async {
    sprite = await Sprite.load('game_over.png');
  }
  @override
  void onGameResize(Vector2 size) {
    super.onGameResize(size);
    screenSize = size;
    position = Vector2((screenSize.x - 204) / 2, 50);
  }
  @override
  void update(double dt) {
    super.update(dt);
    if (birdComponent.getCurrentStatus() != BirdComponent.statusGameOver) {
      removeFromParent();
    } 
  }
}
```

æ˜¯ä¸æ˜¯æ€è·¯ä¹Ÿå¾ˆç±»ä¼¼ï¼Ÿå”¯ä¸€ä¸åŒçš„å°±æ˜¯å‡ºç°çš„æ—¶æœºï¼šåªæœ‰å½“æ¸¸æˆå¤„äºç»“æŸçŠ¶æ€æ—¶ï¼Œè¯¥ç»„ä»¶æ‰æ˜¾ç¤ºï¼Œå…¶å®ƒçŠ¶æ€éƒ½ä¸æ˜¾ç¤ºã€‚

å¥½äº†ï¼Œæå®šäº†ç»„ä»¶çš„å®ç°å’Œæ¶ˆå¤±çš„å¤„ç†ï¼Œæ¥ä¸‹æ¥å°±è¦å›åˆ° flappy_bird.dartï¼Œåœ¨åˆé€‚çš„ä½ç½®æŠŠè¿™äº›ç»„ä»¶æ·»åŠ åˆ°å±å¹•ä¸Šäº†ã€‚å…³é”®ä»£ç å¦‚ä¸‹ï¼š

```dart
class FlappyBirdGame extends FlameGame with TapDetector {
  ...
  @override
  Future<void>? onLoad() async {
    ...
    titleComponent = TitleComponent(size, birdComponent as BirdComponent);
    startButtonComponent =
        StartButtonComponent(size, birdComponent as BirdComponent);
    gameOverComponent = GameOverComponent(size, birdComponent as BirdComponent);
    ...
    await add(titleComponent);
    await add(startButtonComponent);
    return super.onLoad();
  }
  ...
  // å°é¸Ÿé£è¡ŒçŠ¶æ€æ”¹å˜å›è°ƒ
  void _onBirdFlyStatusCallback(int status) {
    if (status == BirdComponent.statusGameOver) {
      if (!contains(gameOverComponent) &&
          gameOverComponent.findParent() == null) {
        add(gameOverComponent);
      }
    }
  }
  ...
  @override
  void onTapDown(TapDownInfo info) {
    super.onTapDown(info);
    ...
    } else if ((birdComponent as BirdComponent).getCurrentStatus() ==
        BirdComponent.statusGameOver) {
      ...
      add(titleComponent);
      add(startButtonComponent);
    }
  }
}
```

ä»”ç»†é˜…è¯»è¿™æ®µä»£ç ï¼Œç»„ä»¶çš„æ·»åŠ è§„å¾‹å°±æ˜¯åœ¨åˆé€‚çš„æ—¶æœºï¼Œè°ƒç”¨`add()`æ–¹æ³•ï¼Œä¼ å…¥éœ€è¦æ·»åŠ çš„ç»„ä»¶ã€‚ç›¸åº”çš„ç»„ä»¶å°±ä¼šåŠ¨æ€åœ°æ·»åŠ åˆ°å±å¹•ä¸Šäº†ï¼Œç®€ç›´ä¸è¦å¤ªå®¹æ˜“ã€‚

æœ€åï¼Œæˆ‘ä»¬å•ç‹¬å®ç°è®°åˆ†å™¨ã€‚è¿™é‡Œç”¨åˆ°äº†è‡ªå®šä¹‰å­—ä½“ï¼Œè¯¥å­—ä½“ä½äº assets\fonts ç›®å½•ä¸­ï¼Œåä¸º game_font.ttfã€‚ä½¿ç”¨å®ƒå®ç°è®°åˆ†å™¨ç»„ä»¶çš„å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

```dart
import 'package:flame/components.dart';
import 'package:flutter/material.dart';
import 'bird.dart';
class ScoreComponent extends PositionComponent {
  ScoreComponent(this.screenSize, this.birdComponent)
      : super(size: Vector2(120, 44));

  Vector2 screenSize;
  final BirdComponent birdComponent;
  late TextComponent scoreText;
  @override
  Future<void>? onLoad() async {
    scoreText = TextComponent(
      textRenderer: TextPaint(
        style: const TextStyle(
            fontFamily: 'game_font',
            fontSize: 30,
            color: Colors.white,
            shadows: [
              Shadow(color: Colors.black, offset: Offset(1, 1), blurRadius: 1),
            ]),
      ),
    );
    scoreText.text = "0";
    scoreText.position = Vector2(0, 0);
    add(scoreText);
  }
  @override
  void onGameResize(Vector2 size) {
    super.onGameResize(size);
    screenSize = size;
    position = Vector2((screenSize.x - 24) / 2, 120);
  }
  @override
  void update(double dt) {
    super.update(dt);
    if (birdComponent.getCurrentStatus() == BirdComponent.statusBeforeGame) {
      removeFromParent();
    }
  }
  void setScore(int score) {
    scoreText.text = score.toString();
  }
}
```

å¯ä»¥çœ‹åˆ°ï¼Œ`onLoad()`æ–¹æ³•ä¸­ï¼Œæ„å»ºäº† TextComponent ç±»å‹çš„ scoreTextï¼Œä¸ºå…¶å®šä¹‰äº†è¯¦ç»†çš„æ ·å¼ã€‚æœ€ç»ˆè°ƒç”¨`add()`æ–¹æ³•å°†å…¶æ·»åŠ åˆ°å±å¹•ä¸Šã€‚

æ¥ç€ï¼Œåœ¨`update()`æ–¹æ³•ä¸­ï¼Œè¿›è¡Œäº†çŠ¶æ€åˆ¤æ–­ï¼Œä¾¿äºåœ¨åˆé€‚çš„æ—¶å€™ç§»é™¤å±å¹•ã€‚

æœ€åçš„`setScore()`æ–¹æ³•åˆ™ç”¨äºè®¾ç½®åˆ†æ•°ã€‚å•çº¯çš„è®°åˆ†å™¨ç»„ä»¶ï¼Œæ˜¯æ— æ³•æ„ŸçŸ¥ç®¡é“çš„è¿åŠ¨çŠ¶æ€çš„ï¼Œæ‰€ä»¥ä¹Ÿå°±æ— ä»å¾—çŸ¥æ˜¯å¦éœ€è¦è®°åˆ†ã€‚å› æ­¤æˆ‘å¯¹å¤–æš´éœ²è¿™ä¸ªæ–¹æ³•ï¼Œç”± flappy_bird.dart ç»Ÿé¢†å…¨å±€ï¼Œè°ƒç”¨è¯¥æ–¹æ³•å®ç°åˆ†å€¼è®¾ç½®ã€‚

é‚£ä¹ˆï¼Œ**è°æœ€æ¸…æ¥šç®¡é“çš„è¿åŠ¨çŠ¶æ€å‘¢ï¼Ÿç­”æ¡ˆè‚¯å®šæ˜¯ç®¡é“è‡ªèº«**ã€‚

åœ¨å·²ç»å®ç°äº†çš„ pipes.dart ä¸­ï¼Œå®šä¹‰äº† PipeUpComponent å’Œ PipeDownComponentã€‚å®ƒä»¬æˆå¯¹å‡ºç°ï¼Œå…±åŒæ„æˆå®Œæ•´çš„ä¸Šä¸‹ç®¡é“ç»„ã€‚å› æ­¤ï¼Œåªéœ€è¦åœ¨ PipeUpComponent æˆ– PipeDownComponent ä¸­å®ç°ä¸€æ¬¡è®°åˆ†é€»è¾‘å³å¯ã€‚æˆ‘æœ€ç»ˆé€‰å®šåœ¨ PipeUpComponent ä¸­å®ç°ã€‚

å¤§å®¶éƒ½çŸ¥é“ï¼Œåœ¨`update()`å›è°ƒæ–¹æ³•ä¸­ï¼Œå¯ä»¥è½»æ¾åœ°è·å–å½“å‰è¿åŠ¨ä½ç½®ã€‚é‚£ä¹ˆï¼Œåœ¨è¿™é‡Œåˆ¤æ–­æ˜¯å¦è¿åŠ¨è¿‡åŠå°±å†åˆé€‚ä¸è¿‡äº†ã€‚äºæ˜¯ï¼Œå…³é”®ä»£ç çš„å®ç°æ˜¯è¿™æ ·çš„ï¼š

```dart
  @override
  void update(double dt) {
    super.update(dt);
    if (position.x <= -50) {
      removeFromParent();
    } else {
      if (_containBird()) {
        birdComponent.changeStatus(BirdComponent.statusGameOver);
      } else {
        position.sub(Vector2(1, 0));
        // åˆ¤æ–­æ˜¯å¦å·²ç»è¿‡åŠï¼ˆå¾—åˆ†ï¼‰
        if (position.x <= screenSize.x / 2) {
          if (onHalfPassedCallback != null) {
            onHalfPassedCallback!();
            onHalfPassedCallback = () {};
          }
        }
        // æ·»åŠ æ–°çš„ç®¡é“ç»„
        if (screenSize.x - position.x >= 150) {
          addNewCallback();
          addNewCallback = () {};
        }
      }
    }
  }
```

å’Œæ·»åŠ æ–°çš„ç®¡é“ç»„ç±»ä¼¼ï¼Œä¸€æ—¦å®Œæˆè®°åˆ†ï¼Œå°±å°†æ–¹æ³•ä½“ï¼ˆ`onHalfPassedCallback()`ï¼‰ç½®ç©ºï¼Œä»¥é˜²é‡å¤è®°åˆ†ã€‚è¿™ä¸ª`onHalfPassedCallback()`æ–¹æ³•åˆ™æ˜¯åœ¨æ„å»º PipeUpComponent æ—¶ä¼ å…¥çš„å‚æ•°ï¼Œå®ƒæœ€åˆä½äº flappy_bird.dart ä¸­ã€‚

æ­¤å¤–ï¼Œç”±äº flappy_bird.dart æ˜¯æ¸¸æˆå…¨å±€çš„â€œç»Ÿé¢†è€…â€ï¼Œå› æ­¤å®ƒå®ç°å¯¹åˆ†æ•°çš„å¢åŠ å’Œè®¾ç½®ï¼Œä»£ç å¦‚ä¸‹ï¼š

```dart
class FlappyBirdGame extends FlameGame with TapDetector {
  ...
  int score = 0;
  ...
  // åŠ¨æ€æ·»åŠ ç®¡é“
  void _addNewPipeGroup() {
    ...
    Component pipeUpComponent = PipeUpComponent(upPipeHeight.toDouble(), () {
      _addNewPipeGroup();
    }, birdComponent as BirdComponent, _onBirdFlyPassedCallback);
    ...
  }
  ...
  // å¾—åˆ†å›è°ƒ
  void _onBirdFlyPassedCallback() {
    score++;
    (scoreComponent as ScoreComponent).setScore(score);
  }
  ...
    @override
  void onTapDown(TapDownInfo info) {
    super.onTapDown(info);
    // æœªå¯åŠ¨æ¸¸æˆæ—¶ï¼Œå¯åŠ¨æ¸¸æˆï¼Œå¹¶è§¦å‘ä¸€æ¬¡å‘ä¸Šé£çš„åŠ¨ä½œ
    if ((birdComponent as BirdComponent).getCurrentStatus() ==
        BirdComponent.statusBeforeGame) {
      ...
      score = 0;
      (scoreComponent as ScoreComponent).setScore(score);
      ...
    }
  }
}
```

åœ¨ç¨‹åºåˆå§‹åŒ–å’Œæ¸¸æˆä¸€å¼€å§‹æ—¶ï¼Œscore çš„å€¼ä¸º 0ï¼Œéšç€æ¸¸æˆçš„è¿›è¡Œï¼Œ`_onBirdFlyPassedCallback()`ä¸æ–­è¢«è°ƒç”¨ï¼Œç©å®¶åˆ†æ•°éšä¹‹ä¸Šæ¶¨ã€‚

åˆ°æ­¤ï¼Œè®°åˆ†å™¨å®Œæ•´åœ°å®ç°äº†ã€‚

## å°ç»“

ğŸ‰ æ­å–œï¼Œæ‚¨å®Œæˆäº†æœ¬æ¬¡è¯¾ç¨‹çš„å­¦ä¹ ï¼

ğŸ“Œ ä»¥ä¸‹æ˜¯æœ¬æ¬¡è¯¾ç¨‹çš„é‡ç‚¹å†…å®¹æ€»ç»“ï¼š

é€šè¿‡æœ¬è®²çš„å­¦ä¹ ï¼Œæˆ‘ä»¬ä¸€åŒå®Œå–„äº† Flappy Birdï¼Œæ•´ä¸ªæ¸¸æˆä¸–ç•Œé‡Œçš„æ¯ä¸ªå…ƒç´ éƒ½å®Œæˆäº†æ·»åŠ å’Œäº’åŠ¨ã€‚

ä¸‹ä¸€è®²ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥å¼¥è¡¥å½“å‰çš„ä¸è¶³ã€‚é€šè¿‡å¯¹ç»„ä»¶å æ”¾æ¬¡åºçš„é‡æ–°è§„åˆ’ï¼Œå°†è®°åˆ†å™¨å’Œ Game Over æ ‡é¢˜ç»„ä»¶å§‹ç»ˆæ˜¾ç¤ºåœ¨æœ€å‰ï¼Œé¿å…è¢«ç®¡é“ç»„ä»¶é®æŒ¡ã€‚æˆ‘ä»¬ä¸‹ä¸€è®²è§ï¼