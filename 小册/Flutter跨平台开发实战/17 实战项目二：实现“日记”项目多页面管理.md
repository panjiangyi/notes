ä»æœ¬è®²å¼€å§‹ï¼Œè¿›å…¥ã€Šæ—¥è®°ã€‹å®æˆ˜é¡¹ç›®çš„å¼€å‘éƒ¨åˆ†ï¼Œè¿™æ¬¾åº”ç”¨ç¼˜èµ·ã€Šä½ çš„åå­—ã€‹åŠ¨æ¼«ã€‚å…ˆæ¥é€šè¿‡ä¸‹é¢çš„ GIF åŠ¨ç”»å¤§è‡´äº†è§£ä¸‹æœ€ç»ˆçš„â€œæˆå“â€ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b5a9d45760264707af5b579a151f9a2c~tplv-k3u1fbpfcp-zoom-1.image)

ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¿™å…¶å®æ˜¯åœ¨ä½¿ç”¨ Android æ‰‹æœºè¿è¡Œ iOS é£æ ¼çš„ç¨‹åºã€‚å¾—ç›Šäº Flutter ä¸­ç»„ä»¶è®¾è®¡ä¸Šçš„è‡ªç”±ï¼ŒåŠ¨å›¾ä¸­è™½ç„¶ä½¿ç”¨ Android æ¨¡æ‹Ÿå™¨è¿è¡Œï¼Œä½†æ•´ä½“ç¨‹åºé£æ ¼ä»ä¿æŒ iOS é£æ ¼è¯¥æœ‰çš„æ ·å¼ã€‚é™¤äº†åŠ¨å›¾ä¸­å±•ç¤ºçš„åŠŸèƒ½å¤–ï¼Œé¦–æ¬¡è¿è¡Œç¨‹åºè¿˜å°†å¼•å¯¼ç”¨æˆ·å®Œæˆæ€§åˆ«å’Œä¸»é¢˜è‰²é€‰æ‹©ï¼Œè¿˜æœ‰æ—¥è®°ç¼–è¾‘åŠŸèƒ½ã€‚

æ˜¾ç„¶ï¼Œå’Œä¹‹å‰çš„ã€Šä¸€è¨€ã€‹ç¨‹åºç›¸æ¯”ï¼Œã€Šæ—¥è®°ã€‹åˆ™æ›´åŠ å¤æ‚ã€‚æœ€ç›´è§‚çš„æ„Ÿå—å¯èƒ½å°±æ˜¯é¡µé¢å˜å¤šäº†ï¼ŒåŠŸèƒ½ä¹Ÿå˜å¤šäº†ã€‚

è¿™èŠ‚è¯¾æˆ‘ä»¬ä¼šå¯¹æ•´ä½“çš„é¡¹ç›®é¡µé¢ç»“æ„è¿›è¡Œè®¾è®¡ä¸å®ç°ï¼Œä¸ºäº†å®ç°å¤šé¡µé¢çš„ç»„ç»‡ç®¡ç†ï¼Œè¿˜è¦å¼•å…¥ä¸€ä¸ªæ–°çš„æ¦‚å¿µâ€”â€”**é¡µé¢å¯¼èˆª**ã€‚

## è®¾è®¡é¡µé¢å¯¼èˆª

é€šä¿—åœ°è¯´ï¼Œ**é¡µé¢å¯¼èˆªå°±æ˜¯å¤šé¡µé¢è·³è½¬çš„â€œåœ°å›¾â€ï¼Œå®ƒæŒ‡æ˜äº†æ‰€æœ‰é¡µé¢çš„æ‰€æœ‰å‡ºå£å’Œå…¥å£**ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸‹å›¾ä¾¿æ˜¯ä¸€ä¸ªç®€å•çš„æ¸¸æˆé¡µé¢å¯¼èˆªå›¾è®¾è®¡ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a49b0fe396d9441b98c5582b4bd67f8f~tplv-k3u1fbpfcp-zoom-1.image)

> æ³¨ï¼šè¯¥å›¾æ‘˜è‡ª Android Developer ç½‘ç«™ï¼ˆ[è®¾è®¡å¯¼èˆªå›¾ | Android å¼€å‘è€… | Android Developers (google.cn)](https://developer.android.google.cn/guide/navigation/navigation-design-graph)ï¼‰

å¯ä»¥çœ‹åˆ°ï¼Œæ¸¸æˆ**æ‰€æœ‰çš„é¡µé¢éƒ½ç½—åˆ—åœ¨å¯¼èˆªå›¾ä¸­**ï¼Œ**ç®­å¤´è¡¨æ˜äº†è·³è½¬çš„æ–¹å‘**ï¼Œ**çº¿æ¡è¡¨æ˜äº†è·³è½¬çš„èµ·ç‚¹å’Œç›®çš„åœ°**ã€‚

ä¸‹é¢å›åˆ°ã€Šæ—¥è®°ã€‹åº”ç”¨ï¼Œé™¤äº†è°ƒç”¨ç³»ç»Ÿç›¸æœºé¡µé¢å¤–ï¼Œæ€»å…±åŒ…å« 4 ä¸ªé¡µé¢ï¼Œåˆ†åˆ«æ˜¯ï¼š

-   é¦–æ¬¡è¿è¡Œæ—¶çš„èµ„æ–™é…ç½®é¡µï¼›
-   æµè§ˆæ—¥è®°åˆ—è¡¨é¡µï¼›
-   å†™æ—¥è®°é¡µé¢ï¼›
-   è¯»æ—¥è®°é¡µé¢ã€‚

`ğŸ’¡ æç¤ºï¼šä¸ºä»€ä¹ˆå…¶å®ƒç¨‹åºçš„ç•Œé¢ä¸åŒ…å«åœ¨å¯¼èˆªå›¾ä¸­å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºå…¶å®ƒç¨‹åºæ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“ï¼Œä¹Ÿä¸å¤ªå¯èƒ½çŸ¥é“ã€‚æˆ‘ä»¬çš„å¯æ§èŒƒå›´åªå±€é™åœ¨æˆ‘ä»¬è¦å¼€å‘çš„è½¯ä»¶ä¸­ã€‚`

æ¥ä¸‹æ¥ï¼Œå¯¹æ¯”ä¸‹é¢ä¸¤ä¸ªè®¾è®¡å›¾ï¼Œå¤§å®¶æƒ³æƒ³å“ªä¸€ç§è®¾è®¡æ›´åˆç†ï¼Ÿ

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/821dfa7e70224443bae774ee162b75de~tplv-k3u1fbpfcp-zoom-1.image)

ä»”ç»†è§‚å¯Ÿ A å’Œ Bï¼Œå®ƒä»¬æœ‰ä¸¤ä¸ªä¸åŒç‚¹ï¼š

-   ç¨‹åºå¯åŠ¨åçš„é¦–é¡µä¸åŒï¼›
-   A ä¸­ï¼Œèµ„æ–™é…ç½®é¡µé¢åªèƒ½å•å‘è·³è½¬åˆ°æ—¥è®°åˆ—è¡¨é¡µé¢ï¼ŒB ä¸­äºŒè€…å¯ä»¥åŒå‘è·³è½¬ã€‚

å¯èƒ½å¾ˆå¤šäººä¼šé€‰æ‹© Aï¼Œå› ä¸ºå®ƒæœ€ç¬¦åˆâ€œæµç¨‹â€ï¼šè½¯ä»¶å¯åŠ¨åå…ˆè¿›è¡Œèµ„æ–™é…ç½®ï¼Œå®Œæˆåè¿›å…¥æ—¥è®°åˆ—è¡¨é¡µï¼Œåœ¨åˆ—è¡¨é¡µå¯ä»¥æŸ¥çœ‹å†å²æ—¥è®°ï¼ˆè·³è½¬åˆ°è¯»æ—¥è®°é¡µé¢ï¼‰å’Œå†™æ–°çš„æ—¥è®°ï¼ˆè·³è½¬åˆ°å†™æ—¥è®°é¡µé¢ï¼‰ã€‚è¿™å¥—é€»è¾‘ä¼¼ä¹æ— å¯åšéï¼Œä½†çœŸçš„åˆé€‚å—ï¼Ÿ

æƒ³è±¡ä¸€ä¸‹ï¼Œé¦–æ¬¡å¯åŠ¨è½¯ä»¶ï¼Œç¡®å®å¯ä»¥æŒ‰ä¸Šè¿°é€»è¾‘è¿›è¡Œã€‚ä½†å¦‚æœæ˜¯ç¬¬äºŒæ¬¡ã€ç¬¬ä¸‰æ¬¡å‘¢ï¼Ÿç”¨æˆ·ä¼šæ„Ÿè§‰å¾ˆå¥‡æ€ªï¼šæˆ‘æ˜æ˜ä¹‹å‰è®¾ç½®è¿‡äº†å„ç§èµ„æ–™ï¼Œä¸ºä»€ä¹ˆåˆè®©æˆ‘è®¾ç½®ä¸€æ¬¡ï¼ŸåŒç†ï¼Œç±»ä¼¼æœ‰ç™»å½•/æ³¨å†ŒåŠŸèƒ½çš„è½¯ä»¶ä¹Ÿæ˜¯å¦‚æ­¤ã€‚æ˜æ˜ç™»å½•è¿‡ï¼Œä¸ºä½•åˆè®©æˆ‘ç™»å½•ä¸€æ¬¡â€¦â€¦

ä¸€ç§è§£å†³ä¹‹é“ï¼ˆAï¼‰æ˜¯åœ¨èµ„æ–™é…ç½®é¡µé¢åšåˆ¤æ–­ã€‚

å¦‚æœä¹‹å‰é…ç½®è¿‡å°±ç›´æ¥è·³è½¬åˆ°æ—¥è®°åˆ—è¡¨é¡µé¢ã€‚è¿™ç¡®å®è§£å†³äº†é‡å¤é…ç½®çš„é—®é¢˜ï¼Œä½†æ–°çš„é—®é¢˜éšä¹‹å‡ºç°ï¼šâ€œåšåˆ¤æ–­â€çš„é€»è¾‘åŒ…å«åœ¨èµ„æ–™é…ç½®é¡µä¹‹ä¸­ï¼Œè¿™å°±æ„å‘³ç€è¯¥é¡µé¢æ— è®ºå¦‚ä½•ä¹Ÿè¦å‡ºç°ä¸€æ¬¡ï¼Œç„¶åæ‰æœ‰å¯èƒ½å‘ç”Ÿè·³è½¬ã€‚ä¹Ÿå°±æ„å‘³ç€ç”¨æˆ·æ— è®ºå¦‚ä½•ä¹Ÿè¦é¢å¯¹ä¸€æ¬¡ä»–æœ‰å¯èƒ½æ— éœ€é¢å¯¹çš„é¡µé¢â€¦â€¦

å½“ç„¶ï¼Œä¹Ÿä¸æ˜¯æ²¡æœ‰ä¼˜åŒ–æ–¹æ³•ï¼šå¦‚æœéœ€è¦é…ç½®ï¼Œåˆ™ç»˜åˆ¶é¡µé¢ç»„ä»¶ï¼›ä¸éœ€è¦é…ç½®åˆ™ç›´æ¥è·³è½¬ï¼ŒåŒæ—¶æ— éœ€æ‰§è¡Œé¡µé¢è·³è½¬åŠ¨ç”»ã€‚å¤©å‘¢ï¼çœŸæ˜¯å¤ªéº»çƒ¦äº†ï¼Œæä¸å¥½ä¼šå¼•å…¥ Bugâ€¦â€¦

å¦ä¸€ç§è§£å†³ä¹‹é“ï¼ˆBï¼‰æ˜¯æŠŠæ—¥è®°åˆ—è¡¨é¡µä½œä¸ºèµ·å§‹é¡µï¼Œç¨‹åºå¯åŠ¨åˆ™ç«‹å³åˆ¤æ–­æ˜¯å¦å·²ç»é…ç½®äº†èµ„æ–™ï¼Œæ²¡æœ‰é…ç½®çš„è¯åˆ™è·³è½¬åˆ°èµ„æ–™é…ç½®é¡µé¢ï¼›å¦‚æœé…ç½®è¿‡äº†å°±å‘†åœ¨è¿™ï¼Œç»§ç»­æ˜¾ç¤ºæ—¥è®°åˆ—è¡¨é¡µï¼Œå“ªå„¿éƒ½ä¸è·³ã€‚

ç›¸æ¯”èµ·æ¥ï¼ŒB æ–¹æ¡ˆæ— è®ºåœ¨ä½“éªŒæ–¹é¢è¿˜æ˜¯å¼€å‘ä¸Šéƒ½æ›´ä¼˜ï¼Œè¿™ä¹Ÿæ˜¯ç›®å‰å¤§éƒ¨åˆ†è½¯ä»¶éƒ½é‡‡ç”¨çš„ä¸€ç§æ–¹æ¡ˆï¼Œä½†å¹¶ä¸æ˜¯å…¨éƒ¨ã€‚æœ‰äº›å®‰å…¨ç­‰çº§è¦æ±‚é«˜çš„è½¯ä»¶ä¾ç„¶éœ€è¦ç™»å½•ï¼Œæ¯”å¦‚é“¶è¡Œã€äº¤æ˜“ç±»çš„è½¯ä»¶ã€‚ç”šè‡³è¿˜ä¼šåœ¨æŸä¸ªæ—¶æœºè·³å‡ºæ‰‹åŠ¿æˆ–é¢éƒ¨è¯†åˆ«é¡µé¢è¿›è¡ŒéªŒè¯ï¼Œè¿™å°±éœ€è¦å¤§å®¶åœ¨è®¾è®¡é¡µé¢å¯¼èˆªæ—¶è€ƒè™‘æ›´å¤šæ¡ä»¶åˆ†æ”¯ï¼Œæ›´ä¸ºå¦¥å–„å¤„ç†äº†ã€‚

## é¡µé¢å †æ ˆ

å½“é¡µé¢è·³è½¬æ—¶ï¼Œæ—§çš„é¡µé¢ä¸ä¼šæ¶ˆå¤±ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ–°çš„é¡µé¢ä¼šåœ¨æ—§é¡µé¢çš„â€œä¸Šæ–¹â€ï¼Œâ€œæŒ¡ä½â€æ—§é¡µé¢ï¼Œå°±å¥½åƒå ç½—æ±‰ä¸€æ ·ã€‚è¿™ç§â€œå ç½—æ±‰â€çš„ç»“æ„ï¼Œè¢«ç§°ä¸ºâ€œé¡µé¢å †æ ˆâ€ã€‚è¦ç†è§£â€œé¡µé¢å †æ ˆâ€çš„æ¦‚å¿µï¼Œæœ€å¥½æ˜¯â€œçœ‹å›¾è¯´è¯â€ã€‚æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸‹å›¾ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b97b7e4d4a5c4e66b6f5fa481399345c~tplv-k3u1fbpfcp-zoom-1.image)

è¿™ä¸ªå›¾æç»˜çš„æ˜¯é¡µé¢è·³è½¬çš„è¿‡ç¨‹ï¼Œå³ç”±é¡µé¢ A è·³è½¬åˆ°é¡µé¢ Bï¼Œå†è·³è½¬åˆ°é¡µé¢ Cã€‚åŒæ—¶ï¼Œå­˜åœ¨ **â€œé¡µé¢å †æ ˆâ€ï¼Œå®ƒâ€œè®°å½•â€ç€é¡µé¢è·³è½¬çš„å†å²ï¼Œä»¥æ ˆçš„å½¢å¼å­˜åœ¨ï¼Œæ‰€æœ‰é¡µé¢çš„å­˜å…¥å’Œå–å‡ºéƒ½åœ¨æ ˆé¡¶è¿›è¡Œ**ã€‚è¿™å°±æ„å‘³ç€ï¼Œå½“ç”¨æˆ·ä»é¡µé¢ C è¿›è¡Œè¿”å›æ“ä½œæ—¶ï¼Œé¡µé¢ B ä¼šå†æ¬¡å‡ºç°ã€‚

è¿™æ ·çš„è¿”å›é€»è¾‘**æ»¡è¶³äº†å¤§éƒ¨åˆ†çš„åœºæ™¯**éœ€æ±‚ï¼Œä½†æ€»æœ‰é‚£ä¹ˆä¸€å°æ’®éœ€æ±‚ç‹¬å…·ç‰¹è‰²ã€‚

å›åˆ°ã€Šæ—¥è®°ã€‹ï¼Œæ—¥è®°åˆ—è¡¨é¡µå’Œèµ„æ–™é…ç½®é¡µé¢å°±å±äºé‚£â€œä¸€å°æ’®â€ã€‚ç¨‹åºè¿è¡Œåï¼Œæ—¥è®°åˆ—è¡¨é¡µä¼šé¦–å…ˆæ˜¾ç¤ºï¼Œå½“æ²¡æœ‰é…ç½®èµ„æ–™æ—¶ï¼Œè·³è½¬åˆ°èµ„æ–™é…ç½®é¡µé¢ï¼Œéšåå†è·³å›æ—¥è®°åˆ—è¡¨é¡µã€‚æ­¤æ—¶ï¼Œç”¨æˆ·è‹¥è¿›è¡Œè¿”å›æ“ä½œï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå°†å†æ¬¡å›åˆ°èµ„æ–™é…ç½®é¡µã€‚å†è¿”å›çš„è¯ï¼Œåˆä¼šå›åˆ°æœ€åˆçš„æ—¥è®°åˆ—è¡¨é¡µâ€¦â€¦è¿˜æ˜¯çœ‹å›¾è¯´è¯ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2cdd7046f1f2457987b658419c81a26a~tplv-k3u1fbpfcp-zoom-1.image)

è¦ç ´å±€ï¼Œæœ‰ä¸¤ç§è§£å†³ä¹‹é“ï¼š

-   ä¸€æ˜¯ä¸è·³è½¬ï¼Œè®©å½“å‰é¡µé¢ç›´æ¥å‡ºæ ˆã€‚è¿™ç§æ–¹å¼é€‚ç”¨äºèµ„æ–™é…ç½®é¡µè·³è½¬åˆ°æ—¥è®°åˆ—è¡¨é¡µï¼Œè®©èµ„æ–™é…ç½®é¡µç›´æ¥å‡ºæ ˆå°±è¡Œäº†ã€‚ä¸è¿‡è¿™æ ·åšéœ€è¦â€œå‘ŠçŸ¥â€æ—¥è®°åˆ—è¡¨é¡µï¼šé…ç½®å‘ç”Ÿæ›´æ”¹äº†ï¼Œä½ è¦èµ¶å¿«åº”ç”¨æœ€æ–°çš„å‚æ•°ï¼›
-   äºŒæ˜¯è·³è½¬çš„åŒæ—¶æ¸…ç†å †æ ˆï¼Œä¹Ÿå°±æ˜¯è¯´è·³è½¬åè‡ªå·±æˆä¸ºæ ˆåº•ï¼Œä¹‹å‰çš„é¡µé¢éƒ½ä¸åœ¨äº†ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ— è®ºç”¨æˆ·æ€ä¹ˆè¿”å›ï¼Œä¹Ÿä¸ä¼šå›åˆ°é”™è¯¯çš„é¡µé¢ä¸Šã€‚

ä¸Šè¿°ä¸¤ç§æ–¹å¼**å­°ä¼˜å­°åŠ£è¦æ ¹æ®å®é™…æƒ…å†µåšåˆ¤å®š**ï¼Œå¯¹äºã€Šæ—¥è®°ã€‹ï¼Œæ˜¾ç„¶ç¬¬äºŒç§æ›´ç®€å•æ˜“è¡Œã€‚è¿˜æ˜¯ç”¨å›¾æ¥è¡¨ç¤ºï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ab30c21af8344b9b67e5292b5ea2997~tplv-k3u1fbpfcp-zoom-1.image)

`ğŸ’¡ æç¤ºï¼šæ— éœ€æ‹…å¿ƒè¿”å›ä¼šç›´æ¥é€€å‡ºç¨‹åºã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨è¿›è¡Œé¦–æ¬¡èµ„æ–™é…ç½®æ—¶ï¼Œç”¨æˆ·æŒ‰äº†è¿”å›é”®ï¼Œç›¸å½“äºæ”¾å¼ƒä½¿ç”¨ã€‚é€€å‡ºç¨‹åºä¸æ­£æ˜¯å¾ˆåˆç†çš„å“åº”å—ï¼Ÿ`

ä½¿ç”¨**é¡µé¢â€œè·¯ç”±â€æ˜¯å®ç°é¡µé¢è·³è½¬çš„é€”å¾„**ã€‚å¯ä»¥**æŒ‰ç…§â€œkey-valueâ€çš„å½¢å¼ç†è§£ï¼Œkey æ˜¯è·¯å¾„ï¼Œvalue è¡¨ç¤ºæŸä¸ªé¡µé¢åŠè·³è½¬å¤„ç†é€»è¾‘**ã€‚è·³è½¬æ—¶ï¼Œ**é€šè¿‡keyæ¥æŒ‡æ˜è·³è½¬çš„ç›®çš„åœ°ã€‚åŒæ—¶ï¼Œè¿˜èƒ½é™„å¸¦æ•°æ®ã€è®¾ç½®è·³è½¬åŠ¨ç”»ã€è®¾ç½®æ˜¯å¦æ¸…é™¤** **å †æ ˆ**ã€‚å…·ä½“çš„å®ç°æ­¥éª¤ï¼Œç¨åå°†ç»“åˆå®é™…ä»£ç è®²è§£ã€‚

## åˆ›å»ºé¡¹ç›®ï¼Œå¹¶æ·»åŠ â€œå ä½â€é¡µé¢

æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œåä¸º diaryã€‚åŒæ—¶åˆ«å¿˜äº†ä¿®æ”¹é»˜è®¤åŒ…åï¼Œé€‰ä¸­æ‰€æœ‰æ”¯æŒçš„å¹³å°ï¼Œä¿®æ”¹ Android å¼€å‘è¯­è¨€ä¸º Javaï¼ŒiOS å¼€å‘è¯­è¨€ä¸º Objective-Cã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/be249062022f4c1d82a9c06687123c88~tplv-k3u1fbpfcp-zoom-1.image)

æ¥ç€ï¼ŒæŒ‰ç…§å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç»“æ„åˆ›å»ºé¡¹ç›®ç»“æ„ã€‚æ¯ä¸ªæ–‡ä»¶åŠç›®å½•çš„æ„ä¹‰åœ¨ä¸‹å›¾ä¸­éƒ½å·²ç»æ ‡æ˜ï¼Œä¾›å¤§å®¶å‚è€ƒï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/86d667b8432548aba50d2576fcd69bf2~tplv-k3u1fbpfcp-zoom-1.image)

`ğŸ’¡ æç¤ºï¼šè¯»æ—¥è®°é¡µé¢å»å“ªå„¿äº†ï¼Ÿåœ¨ä¸€å¼€å§‹çš„åŠ¨å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¯»æ—¥è®°é¡µé¢å…¶å®æ˜¯ä¸€ä¸ªå¯¹è¯æ¡†ã€‚åœ¨ Flutter ä¸­ï¼Œå¯¹è¯æ¡†é€šè¿‡ showCupertinoDialog() æˆ–ç±»ä¼¼å‡½æ•°æ˜¾ç¤ºï¼Œå’Œå…¨å±é¡µé¢ä¸åŒã€‚å…·ä½“å†…å®¹å°†åœ¨åé¢çš„ç« èŠ‚ä¸­è¯¦è¿°ã€‚æ ¹æ®å®é™…éœ€æ±‚ï¼Œè¯»æ—¥è®°å¯¹è¯æ¡†çš„æºç ä½ç½®åœ¨ ui\index\widget ä¸­ã€‚`

å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªé¡µé¢éƒ½æœ‰å„è‡ªçš„ widget ç›®å½•ï¼Œåœ¨ ui ç›®å½•ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªå…¬å…±çš„ widget ç›®å½•ã€‚å‰è€…å­˜æ”¾çš„è‡ªå®šä¹‰ç»„ä»¶ä»…ç”¨äºæ‰€å±çš„é¡µé¢ä¸­ï¼Œè‹¥æŸä¸ªè‡ªå®šä¹‰ç»„ä»¶çš„ä½¿ç”¨èŒƒå›´è¶…è¿‡å•ä¸ªé¡µé¢ï¼Œåˆ™åº”å°†å…¶æ”¾åœ¨å…¬å…± widget ç›®å½•ä¸­ã€‚

æ—¥è®°åˆ—è¡¨é¡µé¢åŒ…å«å…¨éƒ¨æ—¥è®°åˆ—è¡¨é¡µé¢å’ŒæŒ‰æ—¥æœŸç­›é€‰æ—¥è®°åˆ—è¡¨é¡µé¢ï¼Œæºç ç»„ç»‡å½¢å¼ç»“æ„ä¸æ­¤ä¿æŒä¸€è‡´ã€‚

æœ€åï¼Œä¸ºäº†ç¡®è®¤é¡µé¢è·³è½¬é€»è¾‘çš„æ­£ç¡®æ€§ï¼Œæ¯ä¸ªé¡µé¢éƒ½æš‚æ—¶æ‘†æ”¾ä¸€ä¸ªå±…ä¸­çš„æ ‡é¢˜æ–‡æœ¬æ¡†ã€‚æ¯”å¦‚èµ„æ–™é…ç½®é¡µé¢ï¼Œå®ƒçš„å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

```dart
import 'package:flutter/cupertino.dart';
class AppConfigurationPage extends StatefulWidget {
  const AppConfigurationPage({Key? key}) : super(key: key);
  @override
  State<AppConfigurationPage> createState() => _AppConfigurationPageState();
}
class _AppConfigurationPageState extends State<AppConfigurationPage> {
  @override
  Widget build(BuildContext context) {
    return const CupertinoPageScaffold(child: Center(child: Text('èµ„æ–™é…ç½®é¡µé¢')));
  }
}
```

ä¾è‘«èŠ¦ç”»ç“¢ï¼Œå…¶å®ƒé¡µé¢ä¿®æ”¹ç±»åå’Œæ–‡æœ¬æ¡†ä¸­çš„æ–‡å­—å†…å®¹å³å¯ï¼Œè¿™é‡Œå°±ä¸å†è¯¦è¿°äº†ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå†™æ—¥è®°é¡µé¢éœ€è¦ä¼ å…¥æ—¥è®° id ä»¥ä¾¿å®ç°ç¼–è¾‘åŠŸèƒ½ã€‚å½“ id å­˜åœ¨æ—¶ï¼Œä»æ•°æ®åº“åŠ è½½ç›¸åº”å†…å®¹ï¼Œæœ€åæ›´æ–°æ•°æ®åº“ï¼›å½“ id ä¸å­˜åœ¨æ—¶ï¼Œä¿æŒå†…å®¹ä¸ºç©ºï¼Œæœ€åå‘æ•°æ®åº“å†™å…¥æ–°æ•°æ®ã€‚

å¦å¤–è¿˜éœ€åˆ›å»ºä¸€ä¸ªè·¯ç”±å‡ºé”™çš„é¡µé¢ï¼Œç”¨äºæ‰¾ä¸åˆ°è·¯ç”±â€œkeyâ€å€¼æ—¶çš„é»˜è®¤è·³è½¬ç›®çš„åœ°ï¼ˆå°½ç®¡è¿™ä¸å¤ªå¯èƒ½å‘ç”Ÿï¼Œä½†ä¸‡ä¸€å‘¢ï¼‰ã€‚

## å®æˆ˜ fluro è·¯ç”±åº“çš„ä½¿ç”¨

Flutter æ¡†æ¶å†…ç½®äº†é¡µé¢è·³è½¬çš„ APIï¼Œä½†ä¸ºäº†æ›´é«˜æ•ˆåœ°ç¼–ç¨‹ï¼Œæˆ‘æ›´æ¨èå¤§å®¶ä½¿ç”¨æˆç†Ÿçš„åº“ï¼Œfluro ä¾¿æ˜¯å…¶ä¸­ä¸€æ¬¾ã€‚

é›†æˆ fluro çš„æ–¹æ³•éå¸¸ç®€å•ï¼Œåœ¨ fluro åº“[é¦–é¡µ](https://pub.flutter-io.cn/packages/fluro)å°±èƒ½æ‰¾åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œæ·»åŠ åˆ° pubspec.yaml ä¸­å³å¯ã€‚æˆ‘ä½¿ç”¨çš„ç‰ˆæœ¬å·æ˜¯ 2.0.3ï¼Œç›¸åº”ä»£ç å¦‚ä¸‹ï¼š

```dart
dependencies:
  flutter:
    sdk: flutter
  cupertino_icons: ^1.0.2
  ...
  # å…¨å±€è·¯ç”±
  fluro: ^2.0.3
  ...
```

æ·»åŠ å¥½åï¼Œæ‰§è¡Œä¸€æ¬¡ flutter pub get è·å–åŒ…å†…å®¹ã€‚

æ¥ä¸‹æ¥ï¼Œåœ¨ lib ç›®å½•ä¸­æ–°å»ºä¸€ä¸ª router ç›®å½•ï¼Œç”¨æ¥å­˜æ”¾ routes.dartï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­å®šä¹‰äº†å…·ä½“çš„è·¯ç”±è·³è½¬è·¯å¾„ã€‚

é€šè¿‡é˜…è¯»å®˜æ–¹æŒ‡å¯¼æ–‡æ¡£ï¼Œæˆ‘ä»¬äº†è§£åˆ°è·¯ç”±çš„å®šä¹‰é€šè¿‡ `router.define()` æ–¹æ³•å®ç°ï¼Œ**è¯¥æ–¹æ³•éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯è·¯å¾„ï¼Œå¦ä¸€ä¸ªæ˜¯ handler ç±»å‹çš„å˜é‡**ã€‚

å‰æ–‡ä¸­æåˆ°ï¼šæˆ‘ä»¬å¯ä»¥æŠŠè·¯ç”±çœ‹ä½œæ˜¯â€œkey-valueâ€ç»“æ„ï¼Œkey ç›¸å½“äºè·¯å¾„ï¼Œvalue åŒ…å«æŸä¸ªé¡µé¢åŠè·³è½¬å¤„ç†é€»è¾‘ã€‚æ¢è¨€ä¹‹ï¼Œ**è·³è½¬ç›®çš„åœ°å’Œå¤„ç†é€»è¾‘éƒ½åœ¨ handler ä¸­**ã€‚

ã€Šæ—¥è®°ã€‹ç¨‹åºçš„èµ·å§‹é¡µæ˜¯æ—¥è®°åˆ—è¡¨é¡µï¼Œå¯¹åº”åˆ°ä»£ç ä¸­æ˜¯ index.dartã€‚å› æ­¤ï¼Œè·¯ç”±å¦‚ä¸‹å®šä¹‰ï¼š

```dart
import 'package:fluro/fluro.dart';
import 'package:flutter/cupertino.dart';
import '../ui/index/index.dart';
//ä¸»é¡µé¢
var indexHandler = Handler(
    handlerFunc: (BuildContext? context, Map<String, List<String>> params) {
  return const IndexPage();
});
class Routes {
  static String indexPage = '/';
  static void configureRoutes(FluroRouter router) {
    router.define(indexPage, handler: indexHandler);
  }
}
```

å¯¹äºæ— éœ€ä¼ é€’å‚æ•°çš„é¡µé¢è€Œè¨€ï¼Œå¦‚æ­¤ä¾¿å®šä¹‰å¥½äº†è·¯ç”±ã€‚è€Œå¯¹äºéœ€è¦ä¼ é€’å‚æ•°çš„é¡µé¢è€Œè¨€ï¼Œåˆ™éœ€è¦åšäº›ç‰¹å®šçš„å¤„ç†äº†ã€‚æ¯”å¦‚å†™æ—¥è®°é¡µé¢ï¼Œè¯¥é¡µé¢æ‰¿æ‹…äº†æ–°å¢æ—¥è®°å’Œç¼–è¾‘æ—§æ—¥è®°çš„åŠŸèƒ½ã€‚å…¶å…³é”®åœ¨äºæœ‰æ—  id å‚æ•°ã€‚å½“ id å­˜åœ¨ä¸”ä¸ä¸ºç©ºå­—ç¬¦ä¸²æ—¶ä¸ºç¼–è¾‘çŠ¶æ€ï¼›åä¹‹åˆ™æ˜¯æ–°å¢ã€‚å› æ­¤ï¼Œå†™æ—¥è®°é¡µé¢çš„è·¯ç”±å®šä¹‰å¦‚ä¸‹ï¼š

```dart
import 'package:fluro/fluro.dart';
import 'package:flutter/cupertino.dart';
import '../ui/write_new/write_new.dart';
var writeDiaryHandler = Handler(
    handlerFunc: (BuildContext? context, Map<String, List<String>> params) {
  if (params.isNotEmpty && params['id'] != null) {
    return WriteNewPage(id: params['id']![0]);
  } else {
    return const WriteNewPage(id: "");
  }
});
class Routes {
  static String writeDiaryPage = '/writeDiary';
  static void configureRoutes(FluroRouter router) {
     router.define("$writeDiaryPage/:id", handler: writeDiaryHandler);
  }
}
```

è¯·å¤§å®¶æ³¨æ„æ­¤æ—¶ router.define() æ–¹æ³•ä¼ å…¥çš„è·¯å¾„æ ¼å¼ã€‚å¦‚æœä½ è¿˜ä¸æ¸…æ¥šå¦‚ä½•æ„å»ºå¯æ¥å—å‚æ•°çš„ WriteNewPage é¡µé¢ï¼Œè¯·å‚è€ƒæ–‡æœ«çš„é™„å½•ã€‚

å…¨éƒ¨æ—¥è®°åˆ—è¡¨å’ŒæŒ‰æ—¥æœŸç­›é€‰æ—¥è®°åˆ—è¡¨é¡µæ˜¯æ—¥è®°åˆ—è¡¨é¡µé¢çš„å­é¡µé¢ï¼Œæœ‰æ—¥è®°åˆ—è¡¨é¡µé¢çš„ Tab ç»“æ„ç®¡ç†ï¼Œæ— éœ€è¿›è¡Œè·¯ç”±å®šä¹‰ã€‚è¿™æ ·ä¸€æ¥ï¼Œã€Šæ—¥è®°ã€‹ç¨‹åºæ€»å…±éœ€è¦ 4 ä¸ªé¡µé¢è¢«è·¯ç”±ç®¡ç†ï¼Œå…¶ä¸­åŒ…å« 1 ä¸ªé»˜è®¤è·³è½¬é¡µé¢ï¼ˆæˆ–ç§°ä¸ºæ‰¾ä¸åˆ°åœ°å€é¡µé¢ã€404 é¡µé¢â€¦â€¦ï¼‰ã€‚

å®Œæ•´çš„ routes.dart æºç å¦‚ä¸‹æ‰€ç¤ºï¼š

```dart
import 'package:fluro/fluro.dart';
import 'package:flutter/cupertino.dart';
import '../ui/app_configuration/app_configuration.dart';
import '../ui/write_new/write_new.dart';
import '../ui/default/default_page.dart';
import '../ui/index/index.dart';
//è·¯ç”±å‡ºé”™çš„é»˜è®¤é¡µé¢
var errorHandler = Handler(
    handlerFunc: (BuildContext? context, Map<String, List<String>> params) {
      return const DefaultPage();
    });
//ç¨‹åºå‚æ•°é…ç½®é¡µé¢
var appConfigurationHandler = Handler(
    handlerFunc: (BuildContext? context, Map<String, List<String>> params) {
      return const AppConfigurationPage();
    });
//ä¸»é¡µé¢
var indexHandler = Handler(
    handlerFunc: (BuildContext? context, Map<String, List<String>> params) {
      return const IndexPage();
    });
//å†™æ—¥è®°
var writeDiaryHandler = Handler(
    handlerFunc: (BuildContext? context, Map<String, List<String>> params) {
      if (params.isNotEmpty && params['id'] != null) {
        return WriteNewPage(id: params['id']![0]);
      } else {
        return const WriteNewPage(id: "");
      }
    });
class Routes {
  static String indexPage = '/';
  static String errorPage = '/error';
  static String writeDiaryPage = '/writeDiary';
  static String appConfigurationPage = '/appConfiguration';
  static void configureRoutes(FluroRouter router) {
    router.define(appConfigurationPage, handler: appConfigurationHandler);
    router.define(indexPage, handler: indexHandler);
    router.define("$writeDiaryPage/:id", handler: writeDiaryHandler);
    router.notFoundHandler = errorHandler;
  }
}
```

å›åˆ° main.dartï¼ŒæŒ‰ç…§ fluro æ–‡æ¡£ä¸­æ‰€è¿°åˆ›å»º FluroRouter å®ä¾‹ï¼ˆrouterï¼‰ï¼›ç„¶åè°ƒç”¨åˆšåˆšå®ç°çš„ Routes ç±»ä¸­ configureRoutes() æ–¹æ³•ï¼Œå°† router ä½œä¸ºå‚æ•°ä¼ å…¥å…¶ä¸­ï¼›æœ€åï¼Œåœ¨ CupertinoApp ä¸­å°† router.generator ä½œä¸º onGenerateRoute å‚æ•°çš„å€¼ä½¿ç”¨ã€‚ä»£ç å¦‚ä¸‹ï¼š

```dart
import 'package:diary/router/routes.dart';
import 'package:diary/ui/index/index.dart';
import 'package:fluro/fluro.dart';
import 'package:flutter/cupertino.dart';
final router = FluroRouter();
void main() {
  // é…ç½®è·¯ç”±
  Routes.configureRoutes(router);
  runApp(const MyApp());
}
class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);
  @override
  Widget build(BuildContext context) {
    return CupertinoApp(onGenerateRoute: router.generator, home: const Diary());
  }
}
class Diary extends StatefulWidget {
  const Diary({Key? key}) : super(key: key);
  @override
  State<Diary> createState() => _DiaryState();
}
class _DiaryState extends State<Diary> {
  @override
  Widget build(BuildContext context) {
    return const IndexPage();
  }
}
```

å¥½äº†ï¼Œè¿è¡Œä¸€ä¸‹ç¨‹åºå§ï¼Œå‡ºç°ä¸‹å›¾æ‰€ç¤ºçš„ç•Œé¢å°±ä»£è¡¨å¤§åŠŸå‘Šæˆäº†ï¼

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d6171ff7f5d7444b80a89a52d8acc8e4~tplv-k3u1fbpfcp-zoom-1.image)

æœ€åï¼Œå¦‚æœè¦å®ç°ä»æ—¥è®°åˆ—è¡¨é¡µè·³è½¬åˆ°èµ„æ–™é…ç½®é¡µé¢ï¼Œè¯¥å¦‚ä½•åšå‘¢ï¼Ÿ

ç­”æ¡ˆè¿˜æ˜¯æŒ‰ç…§ fluro å®˜æ–¹æ–‡æ¡£çš„æŒ‡å¯¼å³å¯ï¼š

```dart
router.navigateTo(context, Routes.appConfigurationPage, clearStack: true);
```

è¯·æ³¨æ„ï¼Œè¿™é‡Œ clearStack ç»™äº† trueï¼Œæ„æ€æ˜¯æ¸…ç†é¡µé¢è·³è½¬å †æ ˆã€‚è¯¥å€¼é»˜è®¤ä¸º falseã€‚

**åœ¨ Flutter ä¸­ï¼ŒsetState()ã€é¡µé¢è·³è½¬ç­‰æ“ä½œéƒ½è¦æ±‚å½“å‰ç•Œé¢å¤„äº mounted çŠ¶æ€ï¼Œå¦åˆ™ä¼šå‡ºç°å¼‚å¸¸**ã€‚ç”±äºé¡µé¢è·³è½¬çš„æ—¶æœºéå¸¸é å‰ï¼Œå› æ­¤å°±è¦ç¡®ä¿å½“å‰ç•Œé¢ä¸º mounted çŠ¶æ€æ‰è¡Œã€‚

**Flutter ä¸­æä¾›äº† WidgetsBinding.instance.addPostFrameCallback() å›è°ƒæ–¹æ³•æ¥ä¿è¯è¿™ä¸€ç‚¹**ï¼Œå…·ä½“è¯·å‚è€ƒä¸‹é¢çš„ä»£ç ç‰‡æ®µï¼š

```dart
@override
void initState() {
  super.initState();
  WidgetsBinding.instance.addPostFrameCallback((_) {
    // æœªè¿›è¡Œèµ„æ–™é…ç½®ï¼Œè·³è½¬åˆ°ç›¸åº”é¡µé¢è¿›è¡Œ
    if (true) {
      router.navigateTo(context, Routes.appConfigurationPage,
          clearStack: true);
    }
  });
}
```

å†æ¬¡è¿è¡Œç¨‹åºï¼Œæ˜¾ç¤ºå¦‚ä¸‹ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/84a7555928be4dfc9fbf8fd2b37669c5~tplv-k3u1fbpfcp-zoom-1.image)

æ­¤æ—¶åœ¨æŒ‰è¿”å›é”®ï¼Œç¨‹åºå°†ç›´æ¥é€€å‡ºã€‚

## æ€»ç»“

ğŸ‰ æ­å–œï¼Œæ‚¨å®Œæˆäº†æœ¬æ¬¡è¯¾ç¨‹çš„å­¦ä¹ ï¼

ğŸ“Œ ä»¥ä¸‹æ˜¯æœ¬æ¬¡è¯¾ç¨‹çš„é‡ç‚¹å†…å®¹æ€»ç»“ï¼š

æœ¬è®²è¯¦ç»†è§„åˆ’è®¾è®¡äº†ã€Šæ—¥è®°ã€‹é¡¹ç›®ä¸­**æ‰€æœ‰é¡µé¢çš„è·³è½¬é€»è¾‘**ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬é¦–å…ˆè®¾è®¡äº†â€œ**é¡µé¢å¯¼èˆªå›¾**â€ï¼Œå®ƒ**æŒ‡æ˜äº†ç¨‹åºçš„å…¥å£é¡µé¢ä»¥åŠæ¯ä¸ªé¡µé¢çš„æ‰€æœ‰å‡ºå£å’Œå…¥å£è·¯å¾„**ã€‚åŒæ—¶ï¼Œ**ç”±äºâ€œé¡µé¢å †æ ˆâ€æœºåˆ¶çš„å­˜åœ¨ï¼Œè¿˜éœ€åœ¨å¿…è¦æ—¶æ¸…é™¤å †æ ˆ**ã€‚

ä¸ºäº†å®ç°å¯¼èˆªå›¾ä¸­æ‰€æç»˜çš„â€œæ„¿æ™¯â€ï¼Œå¼•å…¥äº†â€œ**é¡µé¢è·¯ç”±**â€çš„æ¦‚å¿µã€‚ä½¿ç”¨æ—¶çš„æ€è·¯**ç±»ä¼¼â€œkey-valueâ€çš„å½¢å¼ï¼Œé€šè¿‡ key æ¥æŒ‡æ˜è·³è½¬çš„ç›®çš„åœ°ï¼Œvalue è¡¨ç¤ºè¯¦ç»†çš„è·³è½¬åŠ¨ä½œ**ã€‚è·³è½¬æ—¶è¿˜å¯åŒ…å«æ•°æ®ã€æŒ‡å®šè·³è½¬åŠ¨ç”»ä»¥åŠè®¾ç½®æ˜¯å¦æ¸…é™¤å †æ ˆã€‚**fluro åº“**å¯ä»¥å¸®æˆ‘ä»¬è½»æ¾å®ç°é¡µé¢è·³è½¬ã€‚

åœ¨é¡¹ç›®åˆ›å»ºä¼Šå§‹ï¼Œç¨‹åºçš„åŠŸèƒ½å¾€å¾€å¹¶æœªå‡†å¤‡å°±ç»ªï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨è‹¥å¹²â€œ**å ä½é¡µé¢**â€å®ç°äº†æ‰€æœ‰é¡µé¢è·³è½¬ã€‚ åŒæ—¶ï¼Œè¿™äº› **â€œå ä½é¡µé¢â€å……å½“äº†æ•´ä¸ªç¨‹åºçš„ UI ç»“æ„**ï¼Œä¸ºåé¢çš„å¼€å‘å·¥ä½œæŒ‡æ˜äº†æ–¹å‘ã€‚

æœ€åï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„ä¸€ç‚¹ï¼šåœ¨é¡µé¢å°šæœªå¤„äºâ€œmountedâ€çŠ¶æ€æ—¶ï¼Œå¼ºè¡Œè·³è½¬ä¼šå‘ç”Ÿå¼‚å¸¸ã€‚æ­¤å¤„æˆ‘ä»¬**ä½¿ç”¨WidgetsBinding.instance.addPostFrameCallback() å›è°ƒæ–¹æ³•ç­‰å¾…é¡µé¢è¿›å…¥â€œmountedâ€** åå†æ‰§è¡Œè·³è½¬ã€‚

åˆ°æ­¤ï¼Œã€Šæ—¥è®°ã€‹é¡¹ç›®çš„æ•´ä½“ UI æ¡†æ¶å°±æ„å»ºå¾—å·®ä¸å¤šäº†ï¼Œåé¢åˆ°äº†å¡«â€œè‚‰â€çš„ç¯èŠ‚ã€‚

â¡ï¸ åœ¨ä¸‹æ¬¡è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šç»§ç»­ã€Šæ—¥è®°ã€‹ç¨‹åºçš„å¼€å‘ï¼Œå…·ä½“å†…å®¹æ˜¯ï¼š

-   æœ¬åœ°æŒä¹…åŒ–çš„å®ç°ï¼Œå…·ä½“åŒ…æ‹¬é¦–é€‰é¡¹ä¸æœ¬åœ°æ•°æ®åº“ï¼ˆSQLiteï¼‰çš„è®¾è®¡ã€å®ç°ä¸å°è£…ã€‚

## é™„å½•ï¼šWriteNewDiary.dart æºç 

```dart
import 'package:flutter/cupertino.dart';
class WriteNewPage extends StatefulWidget {
  const WriteNewPage({Key? key, required this.id}) : super(key: key);
  final String id;
  @override
  State<WriteNewPage> createState() => _WriteNewPageState();
}
class _WriteNewPageState extends State<WriteNewPage> {
  @override
  Widget build(BuildContext context) {
    return const CupertinoPageScaffold(child: Center(child: Text('å†™æ—¥è®°')));
  }
}
```