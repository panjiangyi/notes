æ¬¢è¿å›æ¥ï¼Œå‰ä¸€è®²æˆ‘ä»¬ä¸€åŒå®Œæˆäº†å°é¸Ÿä¸ç®¡é“çš„ç¢°æ’æ£€æµ‹ï¼Œä»¥åŠå½“æ¸¸æˆçŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç®¡é“åœæ­¢ç§»åŠ¨ä»¥åŠæ•´ä½“æ¸…é™¤æ“ä½œã€‚æœ€ç»ˆçš„è¿è¡Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![è¿è¡Œæ•ˆæœ.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9ec082c59c954b18bc0026e512581dc4~tplv-k3u1fbpfcp-watermark.image?)

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ¸¸æˆçš„ä¸»ä½“å…¶å®å·²ç»å·®ä¸å¤šå®Œæˆäº†ã€‚å‰©ä¸‹çš„å°±æ˜¯äº›ç»†èŠ‚çš„è¡¥å……ï¼Œæ¯”å¦‚æœ¬è®²ä»‹ç»çš„èƒŒæ™¯éŸ³ä¹å’Œå£°éŸ³ç‰¹æ•ˆã€‚

è®©æ¸¸æˆå‘å‡ºå£°éŸ³ï¼Œå…¶ç›®çš„ä¸å•å•æ˜¯ä¸ºäº†è®©æ¸¸æˆæœ¬èº«ä¸å†å•è°ƒï¼Œæ›´æ˜¯ä¸€ç§æ¸²æŸ“æ°”æ°›çš„æ–¹å¼ã€‚å¦‚æœå¤§å®¶æœ‰çœ‹è¿‡ææ€–ç”µå½±ï¼Œè¿™ç§æ„Ÿå—ä¼šæ›´åŠ å¼ºçƒˆã€‚åè¿‡æ¥ï¼Œå¦‚æœæŠŠææ€–ç”µå½±çš„å£°éŸ³å…³æ‰åå†å»çœ‹ï¼Œå¾€å¾€å…¶ææ€–æ•ˆæœå°±ä¼šå¤§æ‰“æŠ˜æ‰£äº†ã€‚æ”¾åˆ°æ¸¸æˆä¸Šä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œâ€œæ ¼è±ç¾æœ€ä½³æ¸¸æˆé…ä¹å¥–â€è¯„é€‰å‡ºäº†è‹¥å¹²ä¼˜ç§€çš„æ¸¸æˆé…ä¹ã€‚æ¶‰åŠäº†å¾ˆå¤šçŸ¥åçš„æ¸¸æˆä½œå“ï¼Œæ¯”å¦‚ã€Šé£ä¹‹æ—…äººã€‹ã€ã€Šæœ€åç”Ÿè¿˜è€…ã€‹ç­‰ç­‰ã€‚

ç°åœ¨è®©æˆ‘ä»¬ä¸º Flappy Bird æ·»åŠ èƒŒæ™¯éŸ³ä¹å’ŒéŸ³æ•ˆï¼Œè®©æ¸¸æˆæ›´æœ‰è¶£ã€‚

## é€»è¾‘åˆ†æ

å…ˆæ¥åˆ†æä¸€ä¸‹æ’­æ”¾å’Œåœæ­¢éŸ³ä¹éŸ³æ•ˆçš„æ—¶æœºå§ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ¸¸æˆè¿›å…¥å¼€å§‹çŠ¶æ€ï¼Œè‚¯å®šæ˜¯è¦æ’­æ”¾èƒŒæ™¯éŸ³ä¹çš„ï¼Œæ‰€ä»¥**éŸ³ä¹å¼€å§‹çš„æ—¶æœºä¾¿æ˜¯æ¸¸æˆä»å¼€å§‹å‰è½¬ä¸ºè¿›è¡ŒçŠ¶æ€å**ã€‚

æ¥ç€ï¼Œå°é¸Ÿä¸€æ—¦æ’ä¸Šéšœç¢ç‰©ï¼Œä¹Ÿå°±æ˜¯ç®¡é“ï¼Œåˆ™ä¼šå‘å‡ºæ’å‡»éŸ³æ•ˆã€‚æ˜¾ç„¶ï¼Œæ’ä¸Šéšœç¢ç‰©åˆ™æ„å‘³ç€**æ¸¸æˆä»è¿›è¡ŒçŠ¶æ€è½¬ä¸ºç»“æŸçŠ¶æ€ï¼Œæ­¤æ—¶æ˜¯æ’­æ”¾éŸ³æ•ˆçš„æ—¶æœº**ã€‚

æœ€åï¼Œ**ä¸€æ—¦æ¸¸æˆè½¬åˆ°ç»“æŸçŠ¶æ€ï¼Œæˆ–å¤„äºå¼€å§‹å‰çŠ¶æ€ï¼ŒéŸ³ä¹å°±éœ€è¦åœæ­¢äº†**ã€‚

ä½ çœ‹ï¼Œå¦‚æ­¤åˆ†æåï¼Œå£°éŸ³çš„æ§åˆ¶é€»è¾‘å°±å˜å¾—éå¸¸æ¸…æ™°ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç¼–ç¨‹å®ç°äº†ã€‚

## ä»£ç å®ç°

Flame æ¸¸æˆå¼•æ“æä¾›äº†é¢å¤–çš„åä¸º flame_audio çš„åº“ï¼Œç›®å‰æœ€æ–°çš„ç‰ˆæœ¬æ˜¯ 1.4.0ã€‚é€šè¿‡è¿™ä¸ªåº“ï¼Œå¼€å‘è€…å¯ä»¥è½»æ¾åœ°å®ç°å¯¹å£°éŸ³çš„æ§åˆ¶ã€‚è€Œä¸”è¿™ä¸ªåº“å¯¹æ‰€æœ‰çš„å¹³å°éƒ½æä¾›äº†æ”¯æŒã€‚

é™¤äº† flame_audio å¤–ï¼ŒFlutter åº“è¿˜æä¾›äº†åä¸º audioplayers çš„åº“ï¼Œå®ƒä¹Ÿæ˜¯æ’­æ”¾å£°éŸ³çš„ï¼Œè€Œä¸”ä¹Ÿæ˜¯æä¾›äº†å…¨å¹³å°æ”¯æŒã€‚é‚£ä¹ˆï¼Œè¿™ä¸¤ä¸ªåº“æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ

é€šè¿‡é˜…è¯» flame_audio çš„è‡ªè¿°æ–‡æ¡£ï¼Œæˆ‘å‘ç°å…³äºå®ƒçš„æè¿°æ˜¯è¿™æ ·çš„ï¼š

> This package makes it easy to add audio capabilities to your games, integrating Audioplayers features seamless into your Flame game code.

ç¿»è¯‘è¿‡æ¥çš„è¯ï¼Œå°±æ˜¯è¯´ flame_audio ä¸ºæ¸¸æˆæ·»åŠ å£°éŸ³æä¾›äº†éå¸¸ç®€å•çš„æ–¹å¼ï¼Œå°† audioplayers çš„åŠŸèƒ½æ— ç¼é›†æˆåˆ° Flame æ¸¸æˆä»£ç ä¸­ã€‚æ¢å¥è¯è¯´ï¼Œ **flame_audio å…¶å®å°±æ˜¯å¯¹ audioplayers åº“è¿›è¡Œäº†äºŒæ¬¡å°è£…ï¼Œå½“ç„¶æˆ–è®¸ä¹Ÿæœ‰æ”¹é€ ï¼Œæœ€ç»ˆä½¿å…¶æ›´é€‚åˆæ¸¸æˆå¼€å‘åœºæ™¯**ã€‚

è‡³äº flame_audio ä½¿ç”¨èµ·æ¥åˆ°åº•æœ‰å¤šç®€å•ï¼Œçœ‹ä¸‹é¢è¿™æ®µä»£ç å°±çŸ¥é“äº†ï¼š

```dart
// æ’­æ”¾æ¸¸æˆä¸­èƒŒæ™¯éŸ³ä¹
void playAudioFlying() {
  if (FlameAudio.bgm.isPlaying) {
    FlameAudio.bgm.stop();
  }
  FlameAudio.bgm.initialize();
  FlameAudio.bgm.play("flying.mp3");
}
// æ’­æ”¾æ’å‡»å£°
void playAudioHit() {
  if (FlameAudio.bgm.isPlaying) {
    FlameAudio.bgm.stop();
  }
  FlameAudio.play("hit.mp3");
}
```

æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆå®¹æ˜“ç†è§£å‘¢ï¼Ÿ

flying.mp3 æ˜¯èƒŒæ™¯éŸ³ä¹æ–‡ä»¶ï¼Œä½¿ç”¨`FlameAudio.bgm.play()`æ¥æ§åˆ¶å…¶æ’­æ”¾å’Œåœæ­¢ï¼Œè¾¾åˆ°çš„æ•ˆæœå¯ä»¥è®©éŸ³ä¹ä¸åœåœ°å¾ªç¯æ’­æ”¾ï¼Œç›´åˆ°`FlameAudio.bgm.stop()`è¢«æ‰§è¡Œã€‚

è€Œç›´æ¥ä½¿ç”¨`FlameAudio.play()`åˆ™æ§åˆ¶æŸä¸ªéŸ³é¢‘æ–‡ä»¶æ’­æ”¾ä¸€æ¬¡åç»“æŸã€‚

æ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥ç”¨ audioplayers åº“åˆ†åˆ«å®ç°ä¸Šè¿°ä¸¤ä¸ªæ–¹æ³•ï¼Œç„¶åè¿›è¡Œä»£ç å¯¹æ¯”ï¼Œåˆ™ä¼šå¾ˆæ˜æ˜¾åœ°æ„Ÿå—åˆ°å¤æ‚åº¦çš„ä¸åŒã€‚

æœ€åï¼ŒæŒ‰ç…§å‰é¢é€»è¾‘åˆ†æçš„ç»“æœï¼Œä¿®æ”¹ bird.dart ä¸­çš„`changeStatus()`æ–¹æ³•å¦‚ä¸‹ï¼š

```
// æ”¹å˜çŠ¶æ€
void changeStatus(int status) async {
  if (status != currentStatus) {
    currentStatus = status;
    List<Sprite> sprites = [];
    if (currentStatus == statusFlying) {
      playAudioFlying();
      sprites.add(await Sprite.load('bird0_0.png'));
      sprites.add(await Sprite.load('bird0_1.png'));
      sprites.add(await Sprite.load('bird0_2.png'));
    } else if (currentStatus == statusBeforeGame) {
      if (FlameAudio.bgm.isPlaying) {
        FlameAudio.bgm.stop();
      }
      sprites.add(await Sprite.load('bird0_1.png'));
    } else {
      playAudioHit();
      sprites.add(await Sprite.load('bird0_1.png'));
    }
    animation = SpriteAnimation.spriteList(sprites, stepTime: 0.1);
    if (onStatusChangedCallback != null) {
      onStatusChangedCallback!(currentStatus);
    }
  }
}
```

å¦‚æ­¤ä¾¿å®Œæˆäº†æ‰€æœ‰å£°éŸ³çš„æ·»åŠ ã€‚

ç°åœ¨ï¼Œé‡æ–°è¿è¡Œç¨‹åºï¼Œä½“éªŒèƒŒæ™¯éŸ³ä¹å’ŒéŸ³æ•ˆä¸ºæ¸¸æˆå¸¦æ¥çš„æ”¹å˜å§ï¼

## å°ç»“

ğŸ‰ æ­å–œï¼Œæ‚¨å®Œæˆäº†æœ¬æ¬¡è¯¾ç¨‹çš„å­¦ä¹ ï¼

ğŸ“Œ ä»¥ä¸‹æ˜¯æœ¬æ¬¡è¯¾ç¨‹çš„é‡ç‚¹å†…å®¹æ€»ç»“ï¼š

æœ¬è®²çš„å†…å®¹ç›¸å¯¹æœ€ä¸ºå®¹æ˜“ï¼Œé€šè¿‡é›†æˆ flame_audio åº“ï¼Œå®ç°äº†æ¸¸æˆèƒŒæ™¯éŸ³ä¹å’ŒéŸ³æ•ˆã€‚

flame_audio åº“å®é™…ä¸Šæ˜¯å¯¹ audioplayers åº“è¿›è¡Œäº†äºŒæ¬¡å°è£…ï¼Œæœ€ç»ˆä½¿å…¶æ›´é€‚åˆæ¸¸æˆå¼€å‘åœºæ™¯ã€‚å®é™…ä½¿ç”¨æ—¶ä¹Ÿç¡®å®å¾ˆå®¹æ˜“ï¼Œç‰¹åˆ«æ˜¯å†…ç½®äº†å¾ªç¯æ’­æ”¾èƒŒæ™¯éŸ³ä¹çš„æ–¹æ³•ã€‚

å¥½äº†ï¼Œæœ¬è®²å†…å®¹å°±åˆ°è¿™é‡Œã€‚ä¸‹ä¸€è®²ï¼Œæˆ‘ä¼šå®Œæˆæ¸¸æˆå‰©ä½™çš„ç»„ä»¶çš„æ·»åŠ ï¼Œæ¯”å¦‚æ¸¸æˆæ ‡é¢˜ã€å¼€å§‹æ¸¸æˆçš„æŒ‰é’®ç­‰ç­‰ã€‚å¦å¤–ï¼Œä¸€ä¸ªå®Œæ•´çš„æ¸¸æˆæ˜¯ä¸èƒ½ç¼ºå°‘è®¡åˆ†å™¨çš„ã€‚å› æ­¤ï¼Œè®¡åˆ†å™¨çš„å®ç°ä¹Ÿä¼šæ”¾åˆ°ä¸‹ä¸€è®²è¯¦è¿°ã€‚æˆ‘ä»¬ä¸‹ä¸€è®²è§ï¼