åœ¨å‰ä¸€è®²ä¸­ï¼Œæˆ‘ä»¬ä¸€èµ·å®Œæˆäº†æ•´ä¸ª App çš„â€œéª¨æ¶â€æ­å»ºï¼Œåšå‡ºäº†å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ ·å­ï¼š

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7630bbf2e20e4ae1b9b27914bba4dedd~tplv-k3u1fbpfcp-zoom-1.image)

ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶ç°åœ¨çš„æ ·å­å’Œæœ€ç»ˆçš„æˆå“å¾ˆç›¸ä¼¼ï¼Œä½†æ–‡å­—çš„å†…å®¹ä»ç„¶æ˜¯å‡çš„ã€‚æ­£å¦‚å‰ä¸€è®²æœ«å°¾å¤„æ‰€è¯´çš„é‚£æ ·ï¼šæ–‡å­—çš„æ ·å¼ã€æ’ç‰ˆã€åŠ¨ç”»ç‰¹æ•ˆä»¥åŠæš—é»‘æ¨¡å¼åˆ‡æ¢ç­‰ç­‰éƒ½è¿˜æ²¡æœ‰å®ç°ã€‚

é‚£å°±è®©æˆ‘ä»¬é€ä¸ªå®Œå–„å®ƒä»¬å§ï¼å…ˆä»æ–‡å­—å†…å®¹å¼€å§‹ã€‚

é‚£ä¹ˆï¼Œè¦å®ç°æ¯æ¬¡å¯åŠ¨éƒ½è·å–å¹¶æ˜¾ç¤ºä¸åŒçš„æ–‡å­—ï¼Œè¦å®Œæˆé‚£äº›å·¥ä½œå‘¢ï¼Ÿ

1.  **ç½‘ç»œè¯·æ±‚ï¼š** æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ–‡å­—å†…å®¹æœ¬èº«å¹¶ä¸å†…ç½®äºç¨‹åºä¸­ï¼Œè€Œæ˜¯ä»ç½‘ç»œä¸ŠåŠ¨æ€è·å–çš„ã€‚æ‰€ä»¥ç¬¬ä¸€è¦åŠ¡å°±æ˜¯æ‰¾åˆ°ä¸€ä¸ªæœåŠ¡æä¾›å•†ï¼Œä½œä¸ºæ•°æ®æºï¼Œå¹¶å®Œæˆå†…å®¹çš„è·å–ï¼›
1.  **æ•°æ®è§£æï¼š** ä»ç½‘ç»œä¸Šè·å–çš„åŸå§‹æ•°æ®å¾€å¾€æ˜¯ json æˆ– xml æ ¼å¼ï¼Œå¯¹äºæ™®é€šç”¨æˆ·è€Œè¨€å¾ˆéš¾ç†è§£ã€‚éœ€è¦å¼€å‘è€…å°†è¦æ˜¾ç¤ºçš„æ•°æ®â€œæå–â€å‡ºæ¥ï¼Œè¿™ä¸ªæå–çš„è¿‡ç¨‹ï¼Œå°±æ˜¯æ‰€è°“çš„â€œæ•°æ®è§£æâ€ï¼›
1.  **åˆ·æ–°ç•Œé¢ï¼š** ç¨‹åºè¿è¡Œåï¼Œæ–‡æœ¬æ˜¾ç¤ºåŒºåŸŸçš„å†…å®¹æ˜¯ç©ºçš„ã€‚å®Œæˆç½‘ç»œè¯·æ±‚å’Œæ•°æ®è§£æåï¼Œå°±è¦æŠŠæ˜¾ç¤ºçš„å†…å®¹æ›´æ–°åˆ°ç•Œé¢ä¸Šï¼Œå®Œæˆâ€œæœ€åä¸€å…¬é‡Œâ€çš„å·¥ä½œã€‚

æ¢³ç†å®Œå·¥ä½œåï¼Œå°±åŠ¨æ‰‹å¹²å§ï¼

## æ‹©ä¼˜é€‰åŒ…

é€šè¿‡è°ƒç ”å‘ç°ï¼šFlutter å¹¶ä¸å…·å¤‡å‘èµ·ç½‘ç»œè¯·æ±‚çš„ APIï¼Œäºæ˜¯å°±éœ€è¦å¼€å‘è€…åˆ° [Packageï¼ˆåŒ…ï¼‰ ç½‘ç«™](https://pub.flutter-io.cn/)ä¸­è¿›è¡Œæ£€ç´¢ï¼Œå¹¶é€‰æ‹©åˆé€‚çš„åŒ…é›†æˆåˆ°é¡¹ç›®ä¸­ï¼Œè®©é¡¹ç›®å…·å¤‡ç½‘ç»œè¯·æ±‚çš„èƒ½åŠ›ã€‚è¿™å°±æ¶‰åŠåˆ°ä¸€ä¸ªé—®é¢˜ï¼šæŸä¸ªéœ€æ±‚ï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ï¼‰æœ‰å¯èƒ½å­˜åœ¨å¤šä¸ªåŒ…ï¼Œæˆ‘ä»¬å¦‚ä½•æ‹©ä¼˜é€‰æ‹©å‘¢ï¼Ÿ

æ¥åˆ° Package ç½‘ç«™ï¼Œè¾“å…¥â€œhttpâ€ï¼ˆç½‘ç»œè¯·æ±‚åˆç§°ä¸º http è¯·æ±‚ï¼Œå¤§å¤šæ•°ç½‘ç»œè¯·æ±‚éƒ½å’Œ http è„±ä¸äº†å¹²ç³»ï¼Œå› æ­¤ä»¥ http ä½œä¸ºæœç´¢å…³é”®å­—ï¼‰å¹¶æŒ‰ä¸‹å›è½¦é”®ï¼Œä¼šçœ‹åˆ°è‹¥å¹²ç»“æœã€‚é™¤äº†å†…ç½®åŒ…å¤–ï¼Œéƒ½æœ‰ Likesï¼ˆå–œæ¬¢æˆ–èµï¼‰ã€Pub Pointsï¼ˆè¯„åˆ†ï¼Œæ»¡åˆ† 140 åˆ†ï¼‰å’Œ Popularityï¼ˆäººæ°”å€¼ï¼‰ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f7d39b7ba01e4f02b2316dff6daca73d~tplv-k3u1fbpfcp-zoom-1.image)

æ˜¾ç„¶ï¼Œhttp æ˜¾å¾—ç‰¹åˆ«é¹¤ç«‹é¸¡ç¾¤ï¼Œæ— è®ºæ˜¯ç‚¹èµæ•°ã€å¾—åˆ†è¿˜æ˜¯äººæ°”å€¼éƒ½å¾ˆé«˜ï¼Œæœ€åä¸¤é¡¹è¿˜åˆ°è¾¾é¡¶å³°ã€‚è€Œä¸”æ”¯æŒå…¨å¹³å°ï¼Œä¸ºå®ç°è·¨å¹³å°å¼€å‘æä¾›äº†å¾ˆå¤§æ–¹ä¾¿ã€‚åƒè¿™ç§åŒ…ï¼Œå¯ä»¥ç§°å¾—ä¸Šæ˜¯éå¸¸ä¼˜ç§€äº†ï¼Œæ˜¯æˆ‘ä»¬çš„é¦–é€‰ã€‚

æ¥ä¸‹æ¥è¦è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼šå®ƒçœŸçš„å¯ä»¥å¸®æˆ‘ä»¬å®ç°æƒ³è¦çš„åŠŸèƒ½å—ï¼Ÿé‚£å°±ç‚¹å¼€å®ƒï¼Œä» [Readmeï¼ˆè‡ªè¿°ï¼‰](https://pub.flutter-io.cn/packages/http)ä¸­å¯»æ‰¾ç­”æ¡ˆã€‚

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5cc8ee7381bb43119b8b01972709dc4a~tplv-k3u1fbpfcp-zoom-1.image)

å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¾¿æ˜¯æŸä¸ªåŒ…çš„è¯¦æƒ…é¡µäº†ï¼Œé»˜è®¤å°±æ˜¯ Readme æ ‡ç­¾ã€‚æˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ™°åœ°çœ‹åˆ°è¿™ä¸ªåŒ…éƒ½èƒ½åšä»€ä¹ˆï¼Œä»¥åŠæ€ä¹ˆåšã€‚è¿˜æœ‰å„ç§é¢å¤–çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å¼€å‘è€…ç½‘ç«™ã€å¼€æºåœ°å€ã€API å‚è€ƒæ–‡æ¡£ç­‰ç­‰ã€‚

ä»æˆ‘ä¸ªäººçš„å¼€å‘ç»éªŒæ¥çœ‹ï¼Œ**è¶Šæ˜¯ä¼˜ç§€çš„åŒ…ï¼Œè¿™ç±»æ–‡æ¡£å°±è¶Šè¯¦å®**ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœå¤§å®¶å‘ç°æŸä¸ªåŒ…æ–‡æ¡£å†™å¾—å¾ˆçƒ‚ï¼Œæœ‰å¯èƒ½ä»£ç å†™å¾—ä¹Ÿä¸å¤ªä¼˜ç§€ï¼Œå°±è¦è°¨æ…é€‰æ‹©äº†ã€‚

ç¡®å®šäº†è¦é›†æˆçš„åŒ…ï¼Œä¸‹ä¸€æ­¥å°±è¦åšçœŸæ­£çš„é›†æˆæ“ä½œäº†ã€‚

è¿˜æ˜¯åœ¨è¿™ä¸ªè¯¦æƒ…é¡µï¼Œç‚¹å‡» Installing æ ‡ç­¾ï¼Œå°±ä¼šçœ‹åˆ°é›†æˆæ–¹å¼ï¼š

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa48466a7a2d43f8bcec370cc5512877~tplv-k3u1fbpfcp-zoom-1.image)

å¦‚å›¾æ‰€ç¤ºçš„ä¸‰ç§æ–¹å¼å…¶å®éƒ½å¯ä»¥é¡ºåˆ©æŠŠåŒ…é›†æˆåˆ°é¡¹ç›®ä¸­ï¼Œæˆ‘ä¸ªäººæ¯”è¾ƒæ¨èç¬¬ä¸‰ç§ï¼Œä¹Ÿå°±æ˜¯æ‰‹åŠ¨æ‰“å¼€ pubspec.yaml è¿›è¡Œç¼–è¾‘ï¼Œç„¶åæ‰§è¡Œ `dart pub get` å‘½ä»¤ã€‚å› ä¸ºå½“é¡¹ç›®ä¸­é›†æˆçš„åŒ…æ¯”è¾ƒå¤šï¼Œæˆ–è€…é‚£äº›é€šè¿‡åŒ…åä¸å¤ªèƒ½çœ‹å‡ºä½œç”¨çš„åŒ…ï¼Œæœ€å¥½è¦æ·»åŠ æ³¨é‡Šã€‚è€Œæ·»åŠ æ³¨é‡Šè¿˜æ˜¯è¦æ‰‹åŠ¨ç¼–è¾‘ pubspec.yaml çš„ï¼Œç´¢æ€§ç›´æ¥ä½¿ç”¨ç¬¬ä¸‰ç§æ–¹å¼ï¼Œæ›´çœäº‹ä¸€äº›ã€‚

ä¸‹é¢çš„ä»£ç æ˜¯ç¼–è¾‘åçš„ pubspec.yamlï¼Œä¾›å¤§å®¶å‚è€ƒï¼š

```
name: flutter_juejin_yiyan
description: A new Flutter project.
publish_to: 'none'
version: 1.0.0+1
environment:
  sdk: '>=2.18.2 <3.0.0'
dependencies:
  flutter:
    sdk: flutter
  cupertino_icons: ^1.0.2
  # ç½‘ç»œè¯·æ±‚
  http: ^0.13.5
dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^2.0.0
flutter:
  uses-material-design: true
```

åˆ°æ­¤ï¼Œæˆ‘ä»¬çš„é¡¹ç›®å°±æ‹¥æœ‰äº†ç½‘ç»œè¯·æ±‚çš„èƒ½åŠ›ï¼Œå¯ä»¥å’ŒæœåŠ¡å™¨è¿›è¡Œäº¤äº’äº†ã€‚æ ¹æ®æœåŠ¡ç«¯æä¾›çš„æ¥å£ï¼ŒæŒ‰ç…§æ¥å£è§„èŒƒè¿›è¡Œäº¤äº’ï¼Œå°±èƒ½å¾—åˆ°æœåŠ¡å™¨è¿”å›ç»™æˆ‘ä»¬çš„æ•°æ®äº†ã€‚

## ç½‘ç»œè¯·æ±‚

æˆ‘ä»¬çš„ã€Šä¸€è¨€ã€‹App çš„æ•°æ®æœåŠ¡æä¾›å•†æ¥è‡ªéå¸¸è‰¯å¿ƒçš„â€œ[ä¸€è¨€å¼€å‘è€…ä¸­å¿ƒ](https://developer.hitokoto.cn/sentence/)â€ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä½œä¸ºæœåŠ¡æä¾›å•†ï¼Œéƒ½ä¼šæœ‰è¯¦å°½çš„æ¥å£æ–‡æ¡£ä¾›å®¢æˆ·ç«¯/å‰ç«¯å¼€å‘è€…å‚è€ƒã€‚è¿™ç±»æ–‡æ¡£è¯¦ç»†æè¿°äº†æœåŠ¡ç«¯éƒ½èƒ½æä¾›å“ªäº›å…·ä½“çš„æœåŠ¡ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬ï¼Œä¹Ÿå°±æ˜¯æ¥å£è§„èŒƒã€‚

åœ¨ä¸€è¨€å¼€å‘è€…ä¸­å¿ƒçš„ç½‘ç«™ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾—çŸ¥æœåŠ¡ç«¯çš„æ¥å£åœ°å€ã€è¯·æ±‚å‚æ•°åˆ—è¡¨ä»¥åŠè¿”å›å€¼æ ¼å¼å’Œæ„ä¹‰ã€‚

æˆ‘é€‰æ‹©çš„æ¥å£åœ°å€æ˜¯ï¼šv1.hitokoto.cnï¼Œè¯·æ±‚å‚æ•°ä¼ é€’â€œcâ€ï¼Œè¡¨ç¤ºæˆ‘è¦æŒ‡å®šç±»å‹çš„å¥å­ã€‚å¯¹åº”çš„å‚æ•°å€¼æ˜¯â€œiâ€ï¼Œè¡¨ç¤ºè¯—è¯ç±»å‹ã€‚

åœ¨æ­£å¼ç¼–ç å‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Postman ç­‰æ¥å£æµ‹è¯•å·¥å…·å¯¹æ¥å£è¿›è¡Œæµ‹è¯•ï¼Œå¹¶å¾—åˆ°è¿”å›å€¼ã€‚å¦‚æ­¤éªŒè¯æœåŠ¡ç«¯å¯ä»¥æä¾›æ­£å¸¸çš„æœåŠ¡ï¼Œå½“ç¼–ç åå‘ç°ç¨‹åºè¿è¡Œä¸ç¬¦åˆé¢„æœŸæ—¶ï¼Œæ›´å¥½ç¡®å®šåˆ°åº•æ˜¯æœåŠ¡ç«¯å‡ºäº†é—®é¢˜ï¼Œè¿˜æ˜¯æˆ‘ä»¬è¿™è¾¹çš„ä»£ç å‡ºäº†å·®é”™ã€‚

ä¸åŒäºç®€å•çš„ç½‘ç»œäº¤äº’ï¼ŒPostman æˆ–ç±»ä¼¼çš„æ¥å£æµ‹è¯•å·¥å…·å¯ä»¥ä¿å­˜ç™»å½•é‰´æƒçš„å‡­æ®ï¼Œå¯¹äºåç»­çš„æ¥å£è®¿é—®éå¸¸æœ‰å¸®åŠ©ã€‚

å½“ç„¶ï¼Œåƒä¸€è¨€è¿™ç§ç®€å•çš„æ¥å£ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥ä½¿ç”¨æœ¬åœ°æµè§ˆå™¨è¿›è¡Œæµ‹è¯•ã€‚å…·ä½“åšæ³•ä¾¿æ˜¯å¯åŠ¨æµè§ˆå™¨ï¼Œå¹¶åœ¨åœ°å€æ å¤„è¾“å…¥æ¥å£åœ°å€å’Œå‚æ•°åˆ—è¡¨ï¼Œç„¶åæ•²å‡»å›è½¦é”®å°±è¡Œäº†ã€‚æµ‹è¯•ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/14cfeedbcc4f4d228b2f51b2a8a77acb~tplv-k3u1fbpfcp-zoom-1.image)

æˆ‘ä»¬å…ˆä¸ç®¡è¿”å›å€¼çš„æ ¼å¼ï¼Œè‡³å°‘å¯ä»¥å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼šæœåŠ¡ç«¯å¯ä»¥æ­£å¸¸æä¾›æœåŠ¡ï¼Œè¿”å›å€¼é‡Œæœ‰æˆ‘ä»¬éœ€è¦çš„æ‰€æœ‰å†…å®¹ï¼ˆä¸€è¨€çš„å†…å®¹å’Œä½œè€…/æ¥æºï¼‰ã€‚

ä¸€è¾¹å‚è€ƒ http åŒ…çš„ Readme è¯´æ˜ï¼Œä¸€è¾¹è¿›è¡Œç¼–ç ã€‚

åœ¨ home_page.dart ä¸­ï¼Œåˆ›å»º loadTextContent() æ–¹æ³•ï¼Œå°†ç½‘ç»œè¯·æ±‚æ”¾åˆ°è¿™ä¸ªæ–¹æ³•ä¸­å®ç°ï¼Œå…·ä½“ä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š

```
import 'package:http/http.dart' as http;
class _HomePageState extends State<HomePage> {
  String textContent = '';
  String from = '';
  ...
  void loadTextContent() async {
    var url = Uri.parse('https://v1.hitokoto.cn?c=k');
    var response = await http.post(url);
    setState(() {
      textContent = response.body.toString();
    });
  }
  ...
  Widget textWidget() {
    return Text(textContent + from);
  }
  ...
```

textContent è¡¨ç¤ºä¸€è¨€çš„å†…å®¹ï¼Œfrom è¡¨ç¤ºä½œè€…/æ¥æºã€‚loadTextContent() æ‰§è¡Œäº†ç½‘ç»œè®¿é—®åŠ¨ä½œï¼Œå¹¶é€šè¿‡ setState() é¡ºä¾¿æŠŠæ›´æ–°ç•Œé¢çš„æ´»ä¹Ÿå¹²äº†ã€‚textWidget() è¿”å›çš„æ˜¯æ–‡æœ¬åŒºåŸŸç»„ä»¶ï¼Œå®ƒå°†å…¨éƒ¨è¦æ˜¾ç¤ºçš„å†…å®¹æ‹¼æ¥åœ¨äº†ä¸€èµ·ã€‚

ä»”ç»†é˜…è¯» loadTextContent() çš„å…·ä½“å†…å®¹ï¼Œä¸éš¾å‘ç°ï¼šè¿›è¡Œç½‘ç»œè®¿é—®ï¼ŒåŸºæœ¬å°±æ˜¯ç…§æŠ„ http åŒ…æ–‡æ¡£çš„ç¤ºä¾‹ä»£ç ã€‚ç¡®å®å¦‚æ­¤ï¼Œåœ¨ Flutter ä¸­é›†æˆå’Œä½¿ç”¨åŒ…å°±æ˜¯ä¸ª easy jobï¼Œå¯ä»¥ easy doneã€‚

æ‰€ä»¥ï¼Œå¦‚æœæŸä¸ªåŒ…çš„æ–‡æ¡£å†™çš„è¶³å¤Ÿå®Œå–„ï¼Œå¯¹äºå®ƒçš„ä½¿ç”¨è€…è€Œè¨€ï¼Œç®€ç›´æ˜¯ä¸ªç¦éŸ³ã€‚å¦‚æœå¤§å®¶ä»¥åè‡ªå·±åˆ›å»ºåŒ…ï¼Œå¹¶åˆ†äº«ç»™ä»–äººï¼Œä¹Ÿè¦æä¾›å°½å¯èƒ½è¯¦å°½çš„æ–‡æ¡£è¯´æ˜ã€‚èŠ±è´¹ä¸€ä¸ªäººçš„ä¸€ç‚¹ç‚¹æ—¶é—´ï¼ŒèŠ‚çœè‹¥å¹²äººçš„æ—¶é—´ã€‚

å›åˆ°æˆ‘ä»¬çš„ç¨‹åºï¼Œå®Œæˆç¼–ç åå†æ¬¡è¿è¡Œï¼Œç•Œé¢å°±ä¼šå˜æˆè¿™æ ·ï¼š

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/47c7048735e34b1bb5fd8478e32f9a22~tplv-k3u1fbpfcp-zoom-1.image)

çœ‹ä¸Šå»æ€ä¹ˆæ ·ï¼Ÿè™½ç„¶è¿™ä¼¼ä¹ä¸æ˜¯ç»™æ­£å¸¸äººçœ‹çš„ï¼Œä½†èµ·ç æƒ³è¦çš„ä¸œè¥¿éƒ½åœ¨ã€‚æ¥ä¸‹æ¥å°±æ˜¯â€œæå–â€æœ‰ç”¨æ•°æ®çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯æ•°æ®è§£æçš„è¿‡ç¨‹äº†ã€‚

## æ•°æ®è§£æ

å°±ç›®å‰æ¥çœ‹ï¼Œå¤§éƒ¨åˆ†çš„ç½‘ç»œäº¤äº’çš„è¿”å›å€¼éƒ½æ˜¯ json æ ¼å¼ï¼Œæœ¬ä¾‹ä¹Ÿå¦‚æ­¤ã€‚å¦‚æœä½ å¯¹ json æ ¼å¼ä¸å¤ªäº†è§£ï¼Œæ¨èå…ˆå»é˜…è¯»ï¼š[JSON æ•™ç¨‹ | èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/json/json-tutorial.html)ã€‚

Flutter å†…ç½®äº† json æ ¼å¼è§£æçš„åŒ…ï¼Œå®ƒæ¥è‡ªäº dart:convertã€‚è™½ç„¶åœ¨ package ç½‘ç«™ä¸­å¯¹äºå®ƒçš„æè¿°ä¸å¤šï¼Œä½†åœ¨ Flutter å®˜ç½‘ä¸­æœ‰å¯¹äºå®ƒéå¸¸è¯¦ç»†çš„[ä½¿ç”¨æ•™ç¨‹](https://flutter.cn/docs/development/data-and-backend/json)ï¼Œæˆ‘è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ï¼Œç›´æ¥ä¸Šä¿®æ”¹åçš„ä»£ç ç‰‡æ®µï¼š

```
void loadTextContent() async {
  var url = Uri.parse('https://v1.hitokoto.cn?c=i');
  var response = await http.post(url);
  Map<String, dynamic> respData = json.decode(response.body);
  setState(() {
    textContent = respData['hitokoto'];
    from = respData['from_who'];
  });
}
```

åˆ°æ­¤ï¼Œç½‘ç»œè¯·æ±‚ã€æ•°æ®è§£æå’Œæ›´æ–° UI çš„å·¥ä½œéƒ½å·²ç»å®Œæˆäº†ã€‚å†æ¬¡è¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹æ˜¾ç¤ºæ•ˆæœï¼š

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/01220a2b43ef4bbbbc2c79ccbb7b7772~tplv-k3u1fbpfcp-zoom-1.image)

è¯·å¤§å®¶å…ˆè‡ªè¡Œå°è¯•å®Œæˆä¸Šè¿°ç¼–ç ï¼Œä¸‹é¢æˆ‘ä¼šæ”¾ä¸Šå®Œæ•´çš„ home_page.dartã€‚å¦‚æœä½ æœ‰ä»»ä½•ç–‘éš¾ï¼Œè¯·å‚è€ƒä¸‹é¢çš„ä»£ç è¿›è¡Œæ’æŸ¥ï¼š

```
import 'dart:convert';
import 'package:flutter/material.dart';
import 'package:http/http.dart' as http;
class HomePage extends StatefulWidget {
  const HomePage({Key? key}) : super(key: key);
  @override
  State<HomePage> createState() => _HomePageState();
}
class _HomePageState extends State<HomePage> {
  String textContent = '';
  String from = '';
  void loadTextContent() async {
    var url = Uri.parse('https://v1.hitokoto.cn?c=i');
    var response = await http.post(url);
    Map<String, dynamic> respData = json.decode(response.body);
    setState(() {
      textContent = respData['hitokoto'];
      from = respData['from_who'];
    });
  }
  Widget imageWidget() {
    return const CircleAvatar(
        backgroundColor: Colors.white70,
        foregroundImage: NetworkImage(
            'https://img.xjh.me/random_img.php?type=bg&ctype=nature&return=302'),
        radius: 90);
  }
  Widget textWidget() {
    return Text(textContent + from);
  }
  @override
  void initState() {
    super.initState();
    loadTextContent();
  }
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[imageWidget(), textWidget()],
        ),
      ),
    );
  }
}
```

## **å°ç»“**

ğŸ‰æ­å–œï¼Œæ‚¨å®Œæˆäº†æœ¬æ¬¡è¯¾ç¨‹çš„å­¦ä¹ ï¼

ğŸ“Œ ä»¥ä¸‹æ˜¯æœ¬æ¬¡è¯¾ç¨‹çš„é‡ç‚¹å†…å®¹æ€»ç»“ï¼š

æœ¬è®²ç»§ç»­ã€Šä¸€è¨€ã€‹é¡¹ç›®çš„å®æˆ˜ï¼Œå®Œæˆäº†â€œå¡«è‚‰â€çš„å·¥ä½œï¼Œå…·ä½“åŒ…æ‹¬ç½‘ç»œè¯·æ±‚ã€æ•°æ®è§£æå’Œæ›´æ–° UIã€‚æ­¤å¤–è¿˜è¯¦ç»†åœ°è§£é‡Šäº†é€‰åŒ…çš„åŸåˆ™ã€‚

â¡ï¸ åœ¨ä¸‹æ¬¡è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»§ç»­å¼€å‘ã€Šä¸€è¨€ã€‹Appï¼Œä½“éªŒé€šè¿‡è‡ªå®šä¹‰ç»„ä»¶å®ç°ç«–æ’ + æ¨ªæ’æ–‡æœ¬æ¡†çš„æ ·å¼ï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²è§ï¼